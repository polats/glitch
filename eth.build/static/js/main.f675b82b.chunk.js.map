{"version":3,"sources":["utils/Documents3BoxSpace.js","nodes/Game3/index.js","serviceWorker.js","index.js","nodes/index.js","nodes/Game3/Button.js","utils/chains.js","utils/useWeb3Connect.js","utils/3BoxManager.js","App.js","CustomNodes.js","Dragger.js","dialogs/SaveDialog.js","dialogs/AboutDialog.js","dialogs/SettingsDialog.js","dialogs/FilesList.js","dialogs/LoadDialog.js","nodes sync /^/.*$","nodes sync /.js$","nodes/Game3 sync /.js$"],"names":["keccak256","require","BOX_SPACE","convertFilename2Hash","fileName","toString","getDocumentInfo","space","a","key","private","getMetadata","metadata","console","log","get","document","versions","filter","entry","saveDocument","screenshot","documentStruct","data","set","loadDocuments","all","files","documents","Object","values","map","file","timestamp","timestampStr","moment","unix","fromNow","value","sort","fileA","fileB","req","modules","keys","module","exports","Boolean","window","location","hostname","match","ReactDOM","render","DndProvider","backend","Backend","App","getElementById","navigator","serviceWorker","ready","then","registration","unregister","Button","this","addInput","addOutput","properties","title","count","size","prototype","onConnectionsChange","args","onExecute","input","getInputData","inputs","setOutputData","getTitle","flags","collapsed","handle","e","target","onAction","trigger","onDrawBackground","ctx","destory","style","marginTop","variant","color","onClick","supportedChains","name","short_name","chain","network","chain_id","network_id","rpc_url","providerOptions","walletconnect","package","WalletConnectProvider","options","infuraId","web3Connect","Web3Connect","Core","cacheProvider","useWeb3Connect","useState","provider","setProvider","web3","setWeb3","connected","setConnected","address","setAddress","chainId","setChainId","networkId","setNetworkId","setNetwork","fetching","setFetching","onConnect","connect","providerInited","subscribeProvider","web3Inited","Web3","eth","extend","methods","call","outputFormatter","utils","hexToNumber","getAccounts","accounts","addressTemp","net","getId","networkIdTemp","chainIdTemp","getNetworkByChainId","useEffect","cachedProvider","resetApp","currentProvider","close","clearCachedProvider","networkTemp","on","triggerConnect","box","open3Box","setStatus","Error","Box","openBox","consentCallback","syncDone","openSpace","logout3Box","logout","getBox","getSpace","isFetching","codec","axios","useStyles","makeStyles","card","maxWidth","margin","media","height","root","flexGrow","touchHandler","event","first","changedTouches","type","global","showLibrary","preventDefault","simulatedEvent","createEvent","initMouseEvent","screenX","screenY","clientX","clientY","dispatchEvent","React","menu","setMenu","selectToolActive","setSelectToolActive","moreInfo","setMoreInfo","drawing","setDrawing","drawingColor","setDrawingColor","msg","snackbar","setSnackbar","readQr","setReadQr","liteGraph","setLiteGraph","liteGraphCanvas","setLiteGraphCanvas","playing","setPlaying","openAboutDialog","setOpenAboutDialog","openSettingsDialog","setOpenSettingsDialog","openSaveDialog","setOpenSaveDialog","openLoadDialog","setOpenLoadDialog","currentScreenShot","setCurrentScreenShot","handleOpenSaveDialog","html2canvas","body","canvas","canvasImg","toDataURL","dynamicWidth","innerWidth","addEventListener","passive","onkeydown","keydown","graph","localStorage","setItem","embed","setEmbed","useDrop","accept","drop","item","monitor","didDrop","collect","isOver","isOverCurrent","shallow","isOver2","isOverCurrent2","drop2","showVideoLibrary","setShowVideoLibrary","live","setLive","LiteGraphJS","LGraph","LiteGraph","debug","LGraphCanvas","resize","onAfterExecute","draw","onpagehide","JSON","stringify","serialize","CustomNodes","url","pathname","length","substring","indexOf","URLSearchParams","search","has","decompress","json","configure","history","pushState","hash","replace","params","result","compressed","getItem","parse","embedView","initializeSettings","setInterval","runStep","setSize","useLayoutEffect","updateSize","clientWidth","scrollWidth","clientHeight","scrollHeight","innerHeight","removeEventListener","useWindowSize","width","mouseEnter","pageY","mouseLeave","extraTabs","customNodes","n","push","onMouseLeave","onMouseEnter","bind","xs","cursor","letterSpacing","fontSize","fontFamily","setDirty","change","borderRadius","padding","paddingTop","paddingBottom","textAlign","backgroundColor","opacity","overflow","position","bottom","right","zIndex","transform","transformOrigin","left","icon","positionStyle","borderBottom","whiteSpace","items","i","customNodeItems","top","x","y","node_watch","createNode","pos","visible_area","add","onMouseUp","itemspace","copyToClipboard","compress","Blob","URL","createObjectURL","element","createElement","setAttribute","display","appendChild","click","removeChild","setTimeout","revokeObjectURL","clickawayscreen","ref","search_box","tools","last_mouse_position","showSearchBox","marginLeft","closeSubgraph","ds","reset","currentDrawing","pasteFromClipboard","selectNodes","deleteSelectedNodes","closeAllContextMenus","ink","bottomMenu","extraMenus","paddingLeft","borderRight","live_mode","switchLiveMode","marginRight","start","stop","onTouchStart","marginBottom","borderLeft","viewBox","fill","d","container","spacing","qrReader","delay","onError","onScan","maxHeight","resolution","className","border","id","onChange","reader","FileReader","onload","compressedString","readAsText","background","Math","max","tabIndex","outline","anchor","open","barHeight","columnWidth","anchorOrigin","vertical","horizontal","onClose","ContentProps","message","hexRgb","addHelpers","obj","title_font","sayHello","reactElement","node","offset","scale","stlye","_subgraph_node","originalOnOutputDblClick","onOutputDblClick","index","outputs","globalLiteGraphJS","canvasX","canvasY","_data","substr","originalOnInputDblClick","onInputDblClick","node_button","that","node_text","node_number","originalOnDblClick","onDblClick","processContextMenu","possibleReactElement","remove","originalonHide","onHideNode","originalOnRemoved","onRemoved","addNodes","shadow","nodeSet","default","nodeObject","title_color","shadow_color","registerNodeType","hexColor","hex","rgbVale","red","green","blue","onClear","alert","Dragger","props","useDrag","end","pageX","eventDoc","ownerDocument","doc","documentElement","scrollLeft","clientLeft","scrollTop","clientTop","isDragging","drag","children","QRCode","button","ThreeBoxIcon","SaveDialog","classes","saveType","setSaveType","shared","setShared","setCompressed","documentTitle","setDocumentTitle","currentDocumentInfo","setCurrentDocumentInfo","updateTimer","setUpdateTimer","threeBoxStatus","setThreeBoxStatus","threeBoxConnectionStep","setThreeBoxConnectionStep","saving","setSaving","handleClose","clearTimeout","isLoggedIn","changeTo3BoxSavePage","link","protocol","host","qrcode","savedTitle","updateDocumentInfo","download","share","post","connectTo3Box","documentInfo","justify","startIcon","checkCompletion","justifyContent","href","gutterBottom","copyText","select","setSelectionRange","execCommand","alternativeLabel","activeStep","showName","orientation","displayFull","disabled","component","fullWidth","label","required","AboutDialog","verticalAlign","fontsize","fontWeight","SettingsDialog","theme","flexWrap","palette","paper","gridList","FilesList","GridList","cellHeight","GridListTile","src","alt","GridListTileBar","subtitle","Typography","align","SvgIcon","LoadDialog","loadType","setLoadType","setDocuments","changeTo3BoxLoadPage","loadFromFile","getJsonFromCompressed","Promise","resolve","reject","loc","endloc","lastIndexOf","openFile","Dialog","Grid","Tooltip","Stepper","Step","StepLabel","Link","webpackContext","webpackContextResolve","__webpack_require__","o","code"],"mappings":"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","file":"static/js/main.f675b82b.chunk.js","sourcesContent":["import moment from \"moment\";\r\n\r\nconst keccak256 = require(\"keccak256\");\r\n\r\nexport const BOX_SPACE = \"eth_build\";\r\n\r\nconst convertFilename2Hash = fileName => {\r\n  return keccak256(fileName).toString(\"hex\");\r\n};\r\n\r\nexport const getDocumentInfo = async (space, fileName) => {\r\n  let key = convertFilename2Hash(fileName);\r\n  let metadata = await space.private.getMetadata(key);\r\n  console.log({ metadata });\r\n  let document = await space.private.get(key);\r\n  console.log({ document });\r\n  let log = await space.private.log();\r\n  let versions = log.filter(entry => entry.key === key);\r\n  console.log({ log, versions });\r\n  return { document, metadata, versions };\r\n};\r\n\r\nexport const saveDocument = async (space, fileName, document, screenshot) => {\r\n  let key = convertFilename2Hash(fileName);\r\n  let documentStruct = {\r\n    fileName,\r\n    data: document,\r\n    screenshot\r\n  };\r\n\r\n  await space.private.set(key, documentStruct);\r\n};\r\n\r\nexport const loadDocuments = async space => {\r\n  console.log(\"LOADING DOCUMENTS\");\r\n  let files = await space.private.all({ metadata: true });\r\n  console.log(files);\r\n  let documents = Object.values(files).map(file => ({\r\n    timestamp: file.timestamp,\r\n    timestampStr: moment.unix(file.timestamp).fromNow(),\r\n    ...file.value\r\n  }));\r\n  documents.sort((fileA, fileB) => fileB.timestamp - fileA.timestamp);\r\n  console.log(documents);\r\n  return documents;\r\n};\r\n","const req = require.context('./', true, /.js$/);\r\nconst modules = req.keys().map(req);\r\nmodule.exports = modules;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nimport Backend from 'react-dnd-html5-backend'\r\n//import TouchBackend from 'react-dnd-touch-backend'\r\nimport { DndProvider } from 'react-dnd'\r\n\r\n\r\nReactDOM.render(<DndProvider backend={Backend}><App /></DndProvider>, document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n","const req = require.context('./', true, /.js$/);\r\nconst modules = req.keys().map(req);\r\nmodule.exports = modules;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom'\r\nimport Blockies from 'react-blockies';\r\n\r\nimport MaterialButton from '@material-ui/core/Button';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nfunction Button() {\r\n  this.addInput(\"\", -1);\r\n  this.addOutput(\"\", -1);\r\n  this.addOutput(\"\", \"boolean\");\r\n  this.properties =  {value:\"click me\",title:\"Button\",count:0}\r\n  this.size = [200, 50];\r\n}\r\n\r\nButton.title = \"Button\";\r\n\r\nButton.prototype.onConnectionsChange = function(args){\r\n  console.log(\"onConnectionsChange\",args)\r\n}\r\n\r\nButton.prototype.onExecute = function() {\r\n  let input = this.getInputData(0)\r\n  if (this.inputs[0] && typeof input != \"undefined\" && this.properties.value != input ) {\r\n    this.properties.value = this.getInputData(0);\r\n  }\r\n  this.setOutputData(0,this.properties.value);\r\n  this.setOutputData(1,this.properties.count);\r\n};\r\n\r\nButton.prototype.getTitle = function() {\r\n  if (this.flags.collapsed && this.properties.value) {\r\n    return this.properties.value\r\n  }\r\n  return this.properties.title;\r\n};\r\n\r\nButton.prototype.handle = function(e) {\r\n    this.properties.value = e.target.value\r\n    this.setOutputData(0,this.properties.value);\r\n    this.setOutputData(1,this.properties.count);\r\n}\r\n\r\nButton.prototype.onAction = function(e) {\r\n  this.properties.count = this.properties.count+1\r\n  this.trigger()\r\n}\r\n\r\n\r\nButton.prototype.onDrawBackground = function(ctx) {\r\n  //console.log(this)\r\n  if (this.flags.collapsed) {\r\n    /*this.render(\r\n      <div>\r\n\r\n      </div>\r\n    )*/\r\n    this.destory()///SHOULD WE DESTORY THE ELEMENT FROM THE DOM OR\r\n  }else{\r\n    this.render(\r\n      <div style={{marginTop:4}}>\r\n        <MaterialButton variant=\"contained\" color=\"primary\" size={\"large\"} onClick={()=>{\r\n            this.properties.count = this.properties.count+1\r\n            this.trigger()\r\n          }}>\r\n          {this.properties.value}\r\n      </MaterialButton>\r\n\r\n\r\n      </div>\r\n    )\r\n  }\r\n\r\n\r\n};\r\n\r\n\r\n\r\n\r\nexport default Button\r\n","const supportedChains = [\r\n  {\r\n    name: \"Ethereum Mainnet\",\r\n    short_name: \"eth\",\r\n    chain: \"ETH\",\r\n    network: \"mainnet\",\r\n    chain_id: 1,\r\n    network_id: 1,\r\n    rpc_url: \"https://mainnet.infura.io/\"\r\n  },\r\n  {\r\n    name: \"Ethereum Ropsten\",\r\n    short_name: \"rop\",\r\n    chain: \"ETH\",\r\n    network: \"ropsten\",\r\n    chain_id: 3,\r\n    network_id: 3,\r\n    rpc_url: \"https://ropsten.infura.io/\"\r\n  },\r\n  {\r\n    name: \"Ethereum Rinkeby\",\r\n    short_name: \"rin\",\r\n    chain: \"ETH\",\r\n    network: \"rinkeby\",\r\n    chain_id: 4,\r\n    network_id: 4,\r\n    rpc_url: \"https://rinkeby.infura.io/\"\r\n  },\r\n  {\r\n    name: \"Ethereum Grli\",\r\n    short_name: \"gor\",\r\n    chain: \"ETH\",\r\n    network: \"goerli\",\r\n    chain_id: 5,\r\n    network_id: 5,\r\n    rpc_url: \"https://rpc.goerli.mudit.blog/\"\r\n  },\r\n  {\r\n    name: \"Ethereum Kovan\",\r\n    short_name: \"kov\",\r\n    chain: \"ETH\",\r\n    network: \"kovan\",\r\n    chain_id: 42,\r\n    network_id: 42,\r\n    rpc_url: \"https://kovan.infura.io/\"\r\n  },\r\n  {\r\n    name: \"Ethereum Classic Mainnet\",\r\n    short_name: \"etc\",\r\n    chain: \"ETC\",\r\n    network: \"mainnet\",\r\n    chain_id: 61,\r\n    network_id: 1,\r\n    rpc_url: \"https://ethereumclassic.network\"\r\n  },\r\n  {\r\n    name: \"POA Network Sokol\",\r\n    short_name: \"poa\",\r\n    chain: \"POA\",\r\n    network: \"sokol\",\r\n    chain_id: 77,\r\n    network_id: 1,\r\n    rpc_url: \"https://sokol.poa.network\"\r\n  },\r\n  {\r\n    name: \"POA Network Core\",\r\n    short_name: \"skl\",\r\n    chain: \"POA\",\r\n    network: \"core\",\r\n    chain_id: 99,\r\n    network_id: 2,\r\n    rpc_url: \"https://core.poa.network\"\r\n  },\r\n  {\r\n    name: \"xDAI Chain\",\r\n    short_name: \"xdai\",\r\n    chain: \"xDAI\",\r\n    network: \"mainnet\",\r\n    chain_id: 100,\r\n    network_id: 1,\r\n    rpc_url: \"https://dai.poa.network\"\r\n  }\r\n];\r\n\r\nexport default supportedChains;\r\n","import { useState, useEffect } from \"react\";\r\n\r\nimport Web3 from \"web3\";\r\nimport Web3Connect from \"web3connect\";\r\n\r\nimport WalletConnectProvider from \"@walletconnect/web3-provider\";\r\n// import Portis from \"@portis/web3\";\r\n// import Fortmatic from \"fortmatic\";\r\n// import Torus from \"@toruslabs/torus-embed\";\r\n// import Authereum from \"authereum\";\r\n\r\nimport supportedChains from \"./chains\";\r\nconst INFURA_KEY = \"32f4c2933abd4a74a383747ccf2d7003\";\r\n\r\nconst providerOptions = {\r\n  // portis: {\r\n  //   package: Portis, // required\r\n  //   options: {\r\n  //     id: \"PORTIS_ID\" // required\r\n  //   }\r\n  // },\r\n  walletconnect: {\r\n    package: WalletConnectProvider,\r\n    options: {\r\n      infuraId: INFURA_KEY\r\n    }\r\n  }\r\n  // portis: {\r\n  //   package: Portis,\r\n  //   options: {\r\n  //     id: process.env.REACT_APP_PORTIS_ID\r\n  //   }\r\n  // },\r\n  // fortmatic: {\r\n  //   package: Fortmatic,\r\n  //   options: {\r\n  //     key: process.env.REACT_APP_FORTMATIC_KEY\r\n  //   }\r\n  // },\r\n  // torus: {\r\n  //   package: Torus,\r\n  //   options: {}\r\n  // },\r\n  // authereum: {\r\n  //   package: Authereum,\r\n  //   options: {}\r\n  // }\r\n};\r\n\r\nconst web3Connect = new Web3Connect.Core({\r\n  // network: \"mainnet\", // optional\r\n  cacheProvider: true, // optional\r\n  providerOptions // required\r\n});\r\n\r\nfunction useWeb3Connect() {\r\n  const [provider, setProvider] = useState(null);\r\n  const [web3, setWeb3] = useState(null);\r\n\r\n  const [connected, setConnected] = useState(false);\r\n  const [address, setAddress] = useState(null);\r\n  const [chainId, setChainId] = useState(null);\r\n  const [networkId, setNetworkId] = useState(null);\r\n  const [network, setNetwork] = useState(null);\r\n  const [fetching, setFetching] = useState(false);\r\n\r\n  // console.log({ connected, address, chainId, networkId, fetching, error });\r\n  const onConnect = async () => {\r\n    const providerInited = await web3Connect.connect();\r\n\r\n    await subscribeProvider(providerInited);\r\n\r\n    const web3Inited = new Web3(providerInited);\r\n\r\n    await web3Inited.eth.extend({\r\n      methods: [\r\n        {\r\n          name: \"chainId\",\r\n          call: \"eth_chainId\",\r\n          outputFormatter: web3Inited.utils.hexToNumber\r\n        }\r\n      ]\r\n    });\r\n\r\n    const accounts = await web3Inited.eth.getAccounts();\r\n\r\n    const addressTemp = accounts[0];\r\n\r\n    const networkIdTemp = await web3Inited.eth.net.getId();\r\n\r\n    const chainIdTemp = await web3Inited.eth.chainId();\r\n\r\n    setProvider(providerInited);\r\n    setWeb3(web3Inited);\r\n    setConnected(true);\r\n    setAddress(addressTemp);\r\n    setChainId(chainIdTemp);\r\n    setNetworkId(networkIdTemp);\r\n    setNetwork(getNetworkByChainId(networkIdTemp));\r\n    setFetching(true);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (web3Connect.cachedProvider && !connected) {\r\n      onConnect();\r\n    }\r\n  });\r\n\r\n  const resetApp = async () => {\r\n    if (web3 && web3.currentProvider && web3.currentProvider.close) {\r\n      await web3.currentProvider.close();\r\n    }\r\n    await web3Connect.clearCachedProvider();\r\n    await setProvider(null);\r\n    await setWeb3(null);\r\n    await setConnected(false);\r\n    await setAddress(null);\r\n    await setChainId(null);\r\n    await setNetworkId(null);\r\n    await setFetching(false);\r\n  };\r\n\r\n  const getNetworkByChainId = chainIdTemp => {\r\n    let networkTemp = supportedChains.filter(\r\n      chain => chain.chain_id === chainIdTemp\r\n    );\r\n    return networkTemp ? networkTemp.network : null;\r\n  };\r\n  const subscribeProvider = async provider => {\r\n    provider.on(\"close\", () => resetApp());\r\n\r\n    provider.on(\"accountsChanged\", async accounts => {\r\n      setAddress(accounts[0]);\r\n    });\r\n\r\n    provider.on(\"chainChanged\", async chainId => {\r\n      const networkId = await web3.eth.net.getId();\r\n      setChainId(networkId);\r\n      setNetwork(getNetworkByChainId(networkId));\r\n    });\r\n\r\n    provider.on(\"networkChanged\", async networkId => {\r\n      const chainId = await web3.eth.chainId();\r\n      setChainId(chainId);\r\n      setNetworkId(networkId);\r\n      setNetwork(getNetworkByChainId(networkId));\r\n    });\r\n  };\r\n\r\n  return {\r\n    connected,\r\n    address,\r\n    chainId,\r\n    networkId,\r\n    network,\r\n    fetching,\r\n    triggerConnect: onConnect,\r\n    web3,\r\n    web3Connect,\r\n    resetApp,\r\n    provider\r\n  };\r\n}\r\n\r\nexport default useWeb3Connect;\r\n","import Box from \"3box\";\r\nimport { BOX_SPACE } from \"./Documents3BoxSpace\";\r\n\r\nlet box = null;\r\nlet space = null;\r\nlet fetching = false;\r\n\r\nexport const open3Box = async (\r\n  address,\r\n  provider,\r\n  setStatus = console.log()\r\n) => {\r\n  if (box && space) {\r\n    return { box, space };\r\n  }\r\n  if (fetching) {\r\n    throw new Error(\"trying to open 3Box while fetching...\");\r\n  }\r\n  fetching = true;\r\n  try {\r\n    if (typeof provider !== \"undefined\") {\r\n      setStatus(\"Approve access to 3Box on your wallet\");\r\n\r\n      box = await Box.openBox(address, provider, {\r\n        consentCallback: () => {\r\n          setStatus(\"Synchronizing with 3Box\");\r\n        }\r\n      });\r\n\r\n      setStatus(\"Finalizing synchronization with 3Box\");\r\n      await box.syncDone;\r\n      setStatus(\"Approve opening eth.build space on your wallet\");\r\n      space = await box.openSpace(BOX_SPACE, {\r\n        consentCallback: () => {\r\n          setStatus(\"Synchronizing with your 3Box space\");\r\n        }\r\n      });\r\n      // console.log({ space });\r\n      setStatus(\"Finalizing synchronization with your 3Box space\");\r\n      await space.syncDone;\r\n      setStatus(\"3Box space opened\");\r\n      return { box, space };\r\n    } else {\r\n      throw new Error(\"No web3 provider available\");\r\n    }\r\n  } catch (error) {\r\n    throw error;\r\n  } finally {\r\n    fetching = false;\r\n  }\r\n};\r\n\r\nexport const logout3Box = async () => {\r\n  if (box) {\r\n    await box.logout();\r\n  }\r\n  box = null;\r\n  space = null;\r\n};\r\n\r\nexport const getBox = () => box;\r\nexport const getSpace = () => space;\r\nexport const isFetching = () => fetching;\r\n","import React from 'react';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Snackbar from '@material-ui/core/Snackbar';\r\nimport './App.css';\r\nimport LiteGraphJS from 'litegraph.js/build/litegraph.js'\r\nimport 'litegraph.js/css/litegraph.css'\r\nimport CustomNodes from './CustomNodes'\r\n// import ICON from './icon.png'\r\nimport StackGrid from \"react-stack-grid\";\r\n\r\nimport QrReader from \"react-qr-reader\";\r\n\r\nimport Dragger from './Dragger.js';\r\nimport { useDrop } from 'react-dnd'\r\n\r\nimport { Icon, Tooltip, Button, CardActions, Divider, Drawer, Card, CardMedia, CardContent, CardActionArea, Typography } from '@material-ui/core';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\n// import lessons from './data/lessons';\r\n\r\nimport SaveDialog from \"./dialogs/SaveDialog\";\r\nimport LoadDialog from \"./dialogs/LoadDialog\";\r\nimport AboutDialog from './dialogs/AboutDialog';\r\nimport SettingsDialog from './dialogs/SettingsDialog';\r\n\r\nimport html2canvas from 'html2canvas';\r\n\r\nvar codec = require('json-url')('lzw');\r\nvar QRCode = require('qrcode.react')\r\nconst axios = require('axios');\r\n\r\n\r\nconst useStyles = makeStyles({\r\n  card: {\r\n    maxWidth: 345,\r\n    margin:\"5%\"\r\n  },\r\n  media: {\r\n    height: 140,\r\n  },\r\n  root: {\r\n    flexGrow: 1,\r\n  },\r\n});\r\n\r\n\r\n// console.log(\"LOAD MODULES\")\r\n// let dynamicallyloadedis = require('./Modules')\r\n// console.log(\"dynamicallyloadedis\",dynamicallyloadedis);\r\n// global.modules = {\r\n//   \"price\": {\"nodes\":[{\"type\":\"Modules/Module\",\"pos\":[280,310],\"size\":{\"0\":140,\"1\":46},\"flags\":{},\"order\":0,\"mode\":0,\"outputs\":[{\"name\":\"price\",\"type\":0,\"links\":null}],\"properties\":{\"enabled\":\"on\",\"title\":\"Price\",\"color\":\"7eccc2\"},\"subgraph\":{\"last_node_id\":16,\"last_link_id\":21,\"nodes\":[{\"id\":3,\"type\":\"Control/Timer\",\"pos\":[180,220],\"size\":{\"0\":140,\"1\":26},\"flags\":{},\"order\":0,\"mode\":0,\"outputs\":[{\"name\":\"on_tick\",\"type\":-1,\"links\":[10],\"label\":\"30000ms\"}],\"properties\":{\"interval\":30000,\"event\":\"tick\"},\"boxcolor\":\"#222\"},{\"id\":7,\"type\":\"Storage/Variable\",\"pos\":[1110,190],\"size\":{\"0\":140,\"1\":26},\"flags\":{},\"order\":8,\"mode\":0,\"inputs\":[{\"name\":\"in\",\"type\":0,\"link\":19}],\"outputs\":[{\"name\":\"out\",\"links\":[11]}],\"properties\":{\"varname\":\"price\",\"global\":true}},{\"id\":10,\"type\":\"Modules/Output\",\"pos\":[1130,310],\"size\":[180,40],\"flags\":{},\"order\":10,\"mode\":0,\"inputs\":[{\"name\":\"\",\"type\":0,\"link\":11}],\"properties\":{\"name\":\"price\"}},{\"id\":11,\"type\":\"Input/Text\",\"pos\":[80,360],\"size\":[300,50],\"flags\":{},\"order\":1,\"mode\":0,\"inputs\":[{\"name\":\"\",\"type\":0,\"link\":null}],\"outputs\":[{\"name\":\"\",\"type\":\"string\",\"links\":[]}],\"properties\":{\"blockieSize\":50,\"placeholder\":\"enter text here\",\"title\":\"Text\",\"value\":\"https://api.radarrelay.com/v2/markets/WETH-DAI/ticker\"}},{\"id\":2,\"type\":\"Input/Text\",\"pos\":[80,70],\"size\":[300,50],\"flags\":{},\"order\":2,\"mode\":0,\"inputs\":[{\"name\":\"\",\"type\":0,\"link\":null}],\"outputs\":[{\"name\":\"\",\"type\":\"string\",\"links\":[12]}],\"properties\":{\"blockieSize\":50,\"placeholder\":\"enter text here\",\"title\":\"Text\",\"value\":\"https://api.coinmarketcap.com/v1/ticker/ethereum/\"}},{\"id\":1,\"type\":\"Network/Request\",\"pos\":[430,160],\"size\":{\"0\":180,\"1\":46},\"flags\":{},\"order\":4,\"mode\":0,\"inputs\":[{\"name\":\"[url]\",\"type\":\"string\",\"link\":12},{\"name\":\"request\",\"type\":-1,\"link\":10}],\"outputs\":[{\"name\":\"output\",\"type\":\"object\",\"links\":[14],\"label\":1}],\"properties\":{\"url\":\"https://api.coinmarketcap.com/v1/ticker/ethereum/\",\"debounce\":1000}},{\"id\":14,\"type\":\"Input/Number\",\"pos\":[540,360],\"size\":[190,50],\"flags\":{\"collapsed\":true},\"order\":3,\"mode\":0,\"inputs\":[{\"name\":\"\",\"type\":0,\"link\":null}],\"outputs\":[{\"name\":\"\",\"type\":\"number\",\"links\":[15]}],\"properties\":{\"placeholder\":\"#\",\"title\":\"Number\",\"value\":\"0\"}},{\"id\":13,\"type\":\"Object/index\",\"pos\":[650,320],\"size\":[190,60],\"flags\":{},\"order\":5,\"mode\":0,\"inputs\":[{\"name\":\"obj\",\"type\":0,\"link\":14},{\"name\":\"index\",\"type\":\"number\",\"link\":15}],\"outputs\":[{\"name\":\"value\",\"type\":\"string,object,array\",\"links\":[17]},{\"name\":\"index\",\"type\":\"number\",\"links\":null}],\"properties\":{}},{\"id\":4,\"type\":\"Object/property\",\"pos\":[670,190],\"size\":[190,30],\"flags\":{},\"order\":6,\"mode\":0,\"inputs\":[{\"name\":\"obj\",\"type\":0,\"link\":17}],\"outputs\":[{\"name\":\"\",\"type\":\"\",\"links\":[18]}],\"properties\":{\"value\":\"price_usd\"}},{\"id\":6,\"type\":\"Display/Watch\",\"pos\":[850,70],\"size\":[200,60],\"flags\":{},\"order\":9,\"mode\":0,\"inputs\":[{\"name\":\"\",\"type\":0,\"link\":21,\"label\":\"\"}],\"properties\":{}},{\"id\":16,\"type\":\"Utils/To Float\",\"pos\":[900,220],\"size\":[170,30],\"flags\":{},\"order\":7,\"mode\":0,\"inputs\":[{\"name\":\"\",\"type\":0,\"link\":18}],\"outputs\":[{\"name\":\"\",\"type\":\"number\",\"links\":[19,21]}],\"properties\":{}}],\"links\":[[10,3,0,1,1,-1],[11,7,0,10,0,0],[12,2,0,1,0,\"string\"],[14,1,0,13,0,0],[15,14,0,13,1,\"number\"],[17,13,0,4,0,0],[18,4,0,16,0,0],[19,16,0,7,0,0],[21,16,0,6,0,0]],\"groups\":[],\"config\":{},\"version\":0.4}}],\"links\":[]}\r\n// }\r\n\r\nconst touchHandler = (event)=>{\r\n\r\n\r\n\r\n  //console.log(\"global.showLibrary\",global.showLibrary)\r\n\r\n    var touches = event.changedTouches,\r\n        first = touches[0],\r\n        type = \"\";\r\n    switch(event.type)\r\n    {\r\n        case \"touchstart\": type = \"mousedown\"; break;\r\n        case \"touchmove\":  type = \"mousemove\"; if(global.showLibrary==true){}else{event.preventDefault()};break;\r\n        case \"touchend\":   type = \"mouseup\";   break;\r\n        default:           return;\r\n    }\r\n\r\n    // initMouseEvent(type, canBubble, cancelable, view, clickCount,\r\n    //                screenX, screenY, clientX, clientY, ctrlKey,\r\n    //                altKey, shiftKey, metaKey, button, relatedTarget);\r\n\r\n    var simulatedEvent = document.createEvent(\"MouseEvent\");\r\n    simulatedEvent.initMouseEvent(type, true, true, window, 1,\r\n                                  first.screenX, first.screenY,\r\n                                  first.clientX, first.clientY, false,\r\n                                  false, false, false, 0/*left*/, null);\r\n\r\n    first.target.dispatchEvent(simulatedEvent);\r\n\r\n\r\n\r\n}\r\n\r\n\r\nfunction App() {\r\n  console.log(\"APP\")\r\n\r\n  /*\r\n  window.addEventListener(\"wheel\", event => {\r\n    console.info(event.deltaY)\r\n    event.preventDefault();\r\n  });*/\r\n\r\n\r\n  const [menu, setMenu] = React.useState(\"\");\r\n\r\n  const [selectToolActive, setSelectToolActive] = React.useState(false);\r\n\r\n\r\n\r\n\r\n//  var defaultPrevent=function(e){e.preventDefault();}\r\n//document.addEventListener(\"touchstart\", defaultPrevent);\r\n//document.addEventListener(\"touchmove\" , defaultPrevent);\r\n//\r\n//\r\n//\r\n  const [moreInfo, setMoreInfo] = React.useState(false);\r\n\r\n  const [drawing, setDrawing] = React.useState(false);\r\n  const [drawingColor, setDrawingColor] = React.useState(\"#03A9F4\");\r\n\r\n  const classes = useStyles();\r\n\r\n  const [snackbar, setSnackbar] = React.useState({msg:\"\",color:\"\"});\r\n  global.setSnackbar = setSnackbar\r\n\r\n  const [readQr, setReadQr] = React.useState(false);\r\n\r\n  const [liteGraph, setLiteGraph] = React.useState();\r\n  const [liteGraphCanvas, setLiteGraphCanvas] = React.useState();\r\n  const [playing, setPlaying] = React.useState(true);\r\n\r\n  const [openAboutDialog, setOpenAboutDialog] = React.useState(false);\r\n  const [openSettingsDialog, setOpenSettingsDialog] = React.useState(false);\r\n  const [openSaveDialog, setOpenSaveDialog] = React.useState(false);\r\n  const [openLoadDialog, setOpenLoadDialog] = React.useState(false);\r\n\r\n  const [currentScreenShot, setCurrentScreenShot] = React.useState(null);\r\n\r\n  const handleOpenSaveDialog = async () => {\r\n    let canvas = await html2canvas(document.body);\r\n    let canvasImg = canvas.toDataURL(\"image/png\", 0.35);\r\n    console.log({canvasImg});\r\n    setCurrentScreenShot(canvasImg);\r\n    setOpenSaveDialog(true);\r\n  }\r\n\r\n  const dynamicWidth = window.innerWidth/3\r\n  /*\r\n   document.ontouchstart = touchHandler\r\n   document.ontouchmove = touchHandler\r\n   document.ontouchend = touchHandler\r\n   document.ontouchcancel = touchHandler\r\n   */\r\n\r\n    document.addEventListener(\"touchstart\", touchHandler, {passive: false});\r\n    document.addEventListener(\"touchmove\", touchHandler, {passive: false});\r\n    document.addEventListener(\"touchend\", touchHandler, {passive: false});\r\n    document.addEventListener(\"touchcancel\", touchHandler, {passive: false});\r\n\r\n    //console.log(\"ADDING KEY DOWN!!!\",document.onkeydown)\r\n    document.onkeydown = (keydown)=>{\r\n\r\n      //console.log(\"EVENT\")\r\n      switch (keydown.key) {\r\n        case \"Escape\":\r\n          resetControls();\r\n        break;\r\n        case \"`\":\r\n        case \"~\":\r\n          toggleEmbedView();\r\n        default:\r\n          // console.log(keydown);\r\n        break;\r\n      }\r\n    }\r\n\r\n    const [{ isOver, isOverCurrent }, drop] = useDrop({\r\n      accept: \"node\",\r\n      drop(item, monitor) {\r\n        //console.log(\"DROP!\",item.monitor)\r\n        const didDrop = monitor.didDrop()\r\n        if (didDrop) {\r\n          return\r\n        }\r\n      },\r\n      collect: monitor => ({\r\n        isOver: monitor.isOver(),\r\n        isOverCurrent: monitor.isOver({ shallow: true }),\r\n      }),\r\n    })\r\n\r\n    const [{ isOver2, isOverCurrent2 }, drop2] = useDrop({\r\n      accept: \"node\",\r\n      drop(item, monitor) {\r\n        //console.log(\"DROP!\",item.monitor)\r\n        const didDrop = monitor.didDrop()\r\n        if (didDrop) {\r\n          return\r\n        }\r\n      },\r\n      collect: monitor => ({\r\n        isOver2: monitor.isOver(),\r\n        isOverCurrent2: monitor.isOver({ shallow: true }),\r\n      }),\r\n    })\r\n\r\n// react state variables affected by local storage\r\nconst [showVideoLibrary, setShowVideoLibrary] = React.useState();\r\nconst [live, setLive] = React.useState();\r\nconst [embed, setEmbed] = React.useState();\r\n\r\nfunction initializeSettings() {\r\n  let showLibrary = localStorage.getItem(\"eth.build.showLibrary\");\r\n  let initialMode = localStorage.getItem(\"liveMode\");\r\n  let embedView = localStorage.getItem(\"embedView\");\r\n\r\n  setShowVideoLibrary(showLibrary === 'true');\r\n\r\n  // uncomment to enable saving of initial states\r\n  // setLive(initialMode);\r\n  // setShare(shareView === 'true');\r\n  //\r\n  // if (initialMode === \"View\") {\r\n  //   toggleLiveMode();\r\n  // }\r\n\r\n  // set some settings as global variables\r\n  global.showLibrary = showLibrary;\r\n  global.embedView = embedView;\r\n}\r\n\r\nfunction resetControls() {\r\n    setMenu(\"\")\r\n    setDrawing(\"\")\r\n    global.graph.canvas.drawing = false\r\n    global.graph.canvas.selectToolActive = false\r\n    setSelectToolActive(global.graph.canvas.selectToolActive)\r\n}\r\n\r\nfunction toggleEmbedView() {\r\n  localStorage.setItem(\"shareView\", !embed);\r\n  setEmbed(!embed);\r\n}\r\n\r\nfunction toggleLiveMode() {\r\n  global.graph.canvas.switchLiveMode(true);\r\n  setLive(!live);\r\n}\r\n\r\n// main code starts here\r\nReact.useEffect(()=>{\r\n  console.log(\"MOUNT\",LiteGraphJS)\r\n\r\n  global.title = \"eth.build\"\r\n\r\n  global.LiteGraphJS = LiteGraphJS\r\n  var graph = new LiteGraphJS.LGraph();\r\n\r\n  global.graph = graph\r\n\r\n  //config\r\n  LiteGraphJS.LiteGraph.debug = true\r\n\r\n  console.log(\"can we set grid here?\",LiteGraphJS.LiteGraph)\r\n\r\n  var canvas = new LiteGraphJS.LGraphCanvas(\"#main\", graph);\r\n\r\n  window.addEventListener(\"resize\", function() { canvas.resize(); } );\r\n\r\n  graph.onAfterExecute = function() {\r\n    canvas.draw(true);\r\n  };\r\n\r\n  window.onpagehide = function(){\r\n    var data = JSON.stringify( graph.serialize() );\r\n    localStorage.setItem(\"litegraph\", data );\r\n  }\r\n\r\n  CustomNodes(LiteGraphJS)\r\n\r\n  let url = window.location.pathname\r\n  console.log(\"URL\",url)\r\n  if(url&&url.length>1){\r\n    url = url.substring(1)\r\n\r\n    if(url.indexOf(\"wof\")==0){\r\n      console.log(\"decompressing\",url)\r\n\r\n      var urlParams = new URLSearchParams(window.location.search);\r\n\r\n      // if e key found on query string, this is an embedded share\r\n      if (urlParams.has('e')) {\r\n        setEmbed(true);\r\n      }\r\n\r\n      codec.decompress(url).then(json => {\r\n        console.log(\"configure graph with:\",json)\r\n        graph.configure( json );\r\n        //graph.start()\r\n        graph.canvas = canvas\r\n\r\n        setLiteGraph(graph)\r\n        setLiteGraphCanvas(canvas)\r\n\r\n        window.history.pushState(\"\", \"\", '/');\r\n\r\n        setShowVideoLibrary(false);global.showLibrary=false;\r\n      })\r\n    }else if(url.indexOf(\"build\")==0){\r\n      console.log(\"THIS IS A BUILD\")\r\n      let key = window.location.hash.replace(\"#\",\"\")\r\n\r\n      //let result = await axios.get(\"https://network.eth.build:44386/build\",{})\r\n      axios.get('https://network.eth.build:44386/build', {\r\n        params: {\r\n          key\r\n        }\r\n      }).then((result)=>{\r\n        console.log(\"GET BUILD RESULT\",result)\r\n        let compressed = result.data.compressed\r\n        codec.decompress(compressed).then(json => {\r\n          console.log(\"configure graph with:\",json)\r\n          graph.configure( json );\r\n          //graph.start()\r\n          graph.canvas = canvas\r\n\r\n          setLiteGraph(graph)\r\n          setLiteGraphCanvas(canvas)\r\n\r\n          window.history.pushState(\"\", \"\", '/');\r\n\r\n          setShowVideoLibrary(false);global.showLibrary=false;\r\n        })\r\n      })\r\n\r\n    }\r\n\r\n\r\n  }else{\r\n    var data = localStorage.getItem(\"litegraph\");\r\n    if(data) {\r\n      graph.configure( JSON.parse( data ) );\r\n      //graph.start()\r\n      graph.canvas = canvas\r\n      setLiteGraph(graph)\r\n      setLiteGraphCanvas(canvas)\r\n    } else {\r\n      let defaultData = \"wofCrGxhc3Rfbm9kZV9pZMONAcKZxIHEg8SFbGlua8SLxI0CH8KlxIfEiXPClsKKwqLEjMSOwobCpHR5cGXCrElucHV0L0LEr3RvbsKjcG9zwpI6YMKkc2l6ZcKSw4zDiDLCpWbEgmdzwoDCpW9yxIlyAMKkbcSIZQDCpsSVxK50c8KRwoPCpG5hbWXCoMSmxKhlw7_CpMSUxJbDgMKnb8SvxZrEusWexaDFosWkxKfEqcO_wqXFqmvFnMONAhDFssWhxaPFpcSpwqdib29sZWFuxbnElcW7w4DCqnByb8SpcnRpZXPCg8KldmFsdWXCqGdlbmVyYXRlwqXGl3TGicKmxLJ0xLTGjGPFrm50S8ShxKMBXcaDZcKvQ3LEqMS0L0tleSBQYWlyxLfEucKSZMOMw5zEvsWAZcKCwqEww4pDU8KZwprCoTFCxYfFicWLxY3Fj8amAsWTxZXFl8WZxK_FscWfxoHCrVvGkmnGncapIGvHhsa8xbZlwqbEhHLElWfFqcaOxI7DpsaAxaLGosakxqbGqGXGvcWoxbrFrMWudMWwwpPIhWXCq8eyx7Rlx7bHhsa9x7x0x75uZ8aNxJZzwpDIlMaRdWLElGPImnnInMe9x7_IosW7yKXHrsWiwqdhZGRyxplzyK7InsiwxbrEusW9AsW9FsaRxpPGlcaXxpnCgcmGx7PIiseFecOZQjB4MzdjY2I3MGM4ZMmdZDc3NWHJpGI1M2RhyZs2OWZiyZxkMDJhYzA1NmFmOGPJrmLJujAxMTI4M2PEiTdmNjJkYsKJxKLEjQHCkca9wq9EaXNwxIJ5L0HIuMi6c3PHjcmBAWjDjMOSx5PFgcKSxI5UUMehYcWKxYzFjsWQBceoxInHqsStx6zFnci0xoLHusWSxbrJhMmGxpTGpsmJc8KEwqvIqW9ja8aYU8eUMsiWxIJjZWjGiMWQwqDGq2nGrWXCp8qcyLnIu8acxp7GoMOZKsmTN2LJsjFmNMmzYTI0MzFjYWVkM8m_NWZmN2XLuWU4MDDJpDljy6UzxrnKkFzKk8eAx4JvL03GpcWUbmljyqHKqQE2ZMqnx5XHl8eZOsu4x57HoMWIyq7Ho8qxxqYByrTFlsWYyrfFm8iTyrrCqlttzI_EtcySx7nFpsidyJ_IgMiOyJTCp1vElcSJeMy0xKnCpm51bWLGpsiBxavIlMiHxqXGp8apyIzNiGvFvRDFrcWvx6zCksiUyJbHvsiYyKzIvcy3yLHFvAHIhMq6wqjMsGXMkMySzZ3Iv8aOxbwCE8uAyYjGmHPCgcKlzL1leADKjsa6wojGvcKtypXKl8qZL1fGqGNozJQyw5DCnMyZyqkDVTzKrcqvx6TFkAPMp8q2xbDCkcKEyrrFtcWmyr3Igs2txblhzYZswqDNr8uCzbHCgM25ypB9xr3Cqs2-yphhyppRUsyUw4zCqsSOwprOisSOwpDOuc6PzKPHpXIEzpTMqc6WzpjFs8q7zpvNkMmCzp_Oocuiy6TLpjLLqMuqyaTLrcuvy7HLs8u1y77Lt8u8y7zLvsyAYcyCzITOpMaWzbHCgcKmcXLLjMWBxI4YzZ_ClcKWyIPEjlwAxI5dxZfIr8igz64CyYPGu8-6fQAAz7gQxKTPsgFcAsO_z7gTz7ABxI7CiM--z7gWz7PPusKRz77CpmfGk3VwyKTCpsa0bmZpZ8KAwqd2xqbEv8S1w4s_w5nCmdCq0KrCmg\"\r\n      codec.decompress(defaultData).then(json => {\r\n        global.graph.configure( json )\r\n        //graph.start()\r\n        graph.canvas = canvas\r\n        setLiteGraph(graph)\r\n        setLiteGraphCanvas(canvas)\r\n      })\r\n    }\r\n  }\r\n\r\n  initializeSettings();\r\n\r\n  setInterval(()=>{\r\n    //console.log(graph)\r\n    graph.runStep()\r\n  },250)\r\n},[])\r\n\r\n\r\nconst barHeight = 45\r\n\r\n//let compressed = await codec.compress(liteGraph.serialize())\r\n//liteGraph?JSON.stringify( liteGraph.serialize(), null, 2 ):\"\"\r\n//\r\n\r\nlet allCards = []\r\n\r\n/*\r\nallCards = lessons.map(lesson => {\r\n  return (\r\n    <Card className={classes.card}>\r\n      <CardActionArea onClick={()=>{  window.open(lesson.video) }}>\r\n        <div style={{padding:3,fontSize:18,backgroundColor:lesson.color,color:\"#FFFFFF\",fontFamily: \"'Rubik Mono One', sans-serif\"}}>\r\n          {lesson.header}\r\n        </div>\r\n        <CardMedia\r\n          className={classes.media}\r\n          image={lesson.image}\r\n          title={lesson.name}\r\n          />\r\n        <CardContent>\r\n          <Typography gutterBottom variant=\"h5\" component=\"h2\">\r\n            {lesson.name}\r\n          </Typography>\r\n          <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\r\n            {lesson.desc}\r\n          </Typography>\r\n        </CardContent>\r\n      </CardActionArea>\r\n      <CardActions style={{justifyContent:\"center\"}}>\r\n\r\n        <Button size=\"small\" variant=\"contained\" onClick={()=>{\r\n            codec.decompress(lesson.save).then(json => {\r\n              global.graph.configure( json )\r\n              global.graph.stop()\r\n              global.graph.start()\r\n              setShowVideoLibrary(false);global.showLibrary=false;\r\n            })\r\n          }}>\r\n          Load\r\n        </Button>\r\n\r\n        <Button size=\"small\" style={{marginLeft:20}} variant=\"contained\" onClick={()=>{\r\n            window.open(lesson.video)\r\n          }}>\r\n          Watch\r\n        </Button>\r\n\r\n      </CardActions>\r\n    </Card>\r\n  )\r\n})\r\n*/\r\n\r\n\r\n/* FOR TOP MENU FOR TABLETS:\r\n<div style={{zIndex:1,position:\"fixed\",right:0,top:0,width:\"100%\"}}>\r\n  <div style={{borderRadius:\"0px 0px 8px 8px\",paddingLeft:6,margin:\"auto\",textAlign:\"left\",color:\"#222222\",height:barHeight,right:0,top:0,width:475,backgroundColor:\"#DFDFDF\"}}>\r\n    <div style={{cursor:\"pointer\",letterSpacing:-5,fontSize:32, fontFamily: \"'Rubik Mono One', sans-serif\"}}>\r\n\r\n      <span style={{margin:5,borderLeft:\"1px solid #888888\",height:barHeight}} onClick={async ()=>{\r\n          alert(\"click\")\r\n        }}>\r\n        <Tooltip title=\"Learn More\" style={{marginLeft:10,cursor:\"pointer\"}}>\r\n          <Icon>\r\n            swap_vert\r\n          </Icon>\r\n        </Tooltip>\r\n      </span>\r\n\r\n    </div>\r\n  </div>\r\n</div>\r\n*/\r\n\r\n/*\r\n<div style={{zIndex:1,position:\"fixed\",width:\"100%\",left:0,top:0}}>\r\n  <Grid container className={classes.root} spacing={2}>\r\n    {customNodes}\r\n  </Grid>\r\n</div>\r\n\r\n */\r\n\r\n\r\nlet [width, height] = useWindowSize();\r\n\r\nconst toggleDraw = (e)=>{\r\n    let currentDrawing = drawing\r\n    console.log(\"toggle draw\",currentDrawing,drawingColor)\r\n    currentDrawing = !currentDrawing\r\n    if(currentDrawing){\r\n      currentDrawing = drawingColor\r\n      global.graph.canvas.drawing = drawingColor\r\n      global.graph.canvas.selectToolActive = false\r\n      setSelectToolActive(global.graph.canvas.selectToolActive)\r\n    }else{\r\n      global.graph.canvas.drawing = false\r\n    }\r\n\r\n    setDrawing(currentDrawing)\r\n    console.log(\"toggle draw is now\",global.graph.canvas.drawing)\r\n\r\n}\r\n\r\n\r\nlet spacing = 0\r\n\r\nconst mouseEnter = (name,e)=>{\r\n  //console.log(e.pageY,height)\r\n  if(e.pageY > 60 && e.pageY < height-60){\r\n    setMenu(\"\")\r\n  }else{\r\n    setMenu(name)\r\n  }\r\n}\r\n\r\nconst mouseLeave = (e)=>{\r\n  setMenu(\"\")\r\n}\r\n\r\nconst tabFontSize = 14\r\n\r\nlet extraTabs = []\r\n//console.log(\"MENU:\",menu)\r\nlet customNodes = []\r\n\r\nif(!showVideoLibrary && !embed){\r\n\r\n  for(let n in global.customNodes){\r\n    //console.log(\"GRID\",global.customNodes[n])\r\n    //if(global.customNodes[n].name!=\"Special\" && global.customNodes[n].name!=\"Modules\"){\r\n      if(!drawing && global.customNodes[n].name==menu){\r\n        let positionStyle = {position:\"absolute\"}\r\n        let style = {borderBottom:'3px solid #888888',whiteSpace:\"nowrap\",letterSpacing:-1,fontSize:14,margin:4,borderRadius:\"8px 8px 8px 8px\",padding:6,textAlign:\"center\",color:\"#FFFFFF\",backgroundColor:\"#\"+global.customNodes[n].color}\r\n        if(n < 6 ){\r\n          positionStyle.left = 0\r\n        }else{\r\n          positionStyle.right = 0\r\n        }\r\n\r\n\r\n        let items = []\r\n        let itemspace = 40\r\n        for(let i in global.customNodeItems[global.customNodes[n].name]){\r\n          let item = global.customNodeItems[global.customNodes[n].name][i]\r\n          //console.log(\"Add item\",item)\r\n          items.push([\r\n            <div style={{...positionStyle,top:50+itemspace*i}}>\r\n            <Dragger key={\"dragger\"+n+\"_\"+i} name={item.title} drop={(name,x,y)=>{\r\n                //console.log(\"DO A DROP AT \",name,x,y)\r\n                setMenu(\"\")\r\n                var node_watch = global.LiteGraphJS.LiteGraph.createNode(menu+\"/\"+item.title);\r\n                node_watch.pos = [x-40+global.graph.canvas.visible_area[0],y+global.graph.canvas.visible_area[1]];\r\n                //console.log(\"looking in\",,liteGraph,liteGraph._is_subgraph)\r\n                global.graph.canvas.graph.add(node_watch);\r\n              }}>\r\n              <div onMouseUp={()=>{\r\n                  if(menu){\r\n                    setMenu(\"\")\r\n                    var node_watch = global.LiteGraphJS.LiteGraph.createNode(menu+\"/\"+item.title);\r\n                    node_watch.pos = [width/2-40+global.graph.canvas.visible_area[0],height/2+global.graph.canvas.visible_area[1]];\r\n                    //console.log(\"looking in\",,liteGraph,liteGraph._is_subgraph)\r\n                    global.graph.canvas.graph.add(node_watch);\r\n                  }\r\n\r\n              }} style={style}>\r\n                {item.title}\r\n              </div>\r\n            </Dragger>\r\n            </div>\r\n          ])\r\n        }\r\n\r\n        if(global.customNodes[n].name==\"Modules\"){\r\n\r\n          /*\r\n          items.push(<div key={\"bar4\"} style={{padding:4,position:\"absolute\",bottom:itemspace*4,width:\"80%\",borderTop:\"1px solid #888888\"}}></div>)\r\n\r\n          let count = 3\r\n          for(let m in global.modules){\r\n            items.push(\r\n              <Dragger key={\"draggercustom\"+m} name={m}  drop={(name,x,y)=>{\r\n                  //console.log(\"DO A DROP AT \",name,x,y)\r\n                  setMenu(\"\")\r\n\r\n                  localStorage.setItem(\"litegrapheditor_clipboard\",JSON.stringify(global.modules[m]))\r\n                  global.graph.canvas.last_mouse_position[0] = width/2\r\n                  global.graph.canvas.last_mouse_position[1] = height/2\r\n                  global.graph.canvas.pasteFromClipboard()\r\n                  global.graph.canvas.setDirty(true);\r\n                  global.graph.canvas.graph.change();\r\n                }}>\r\n                  <div style={{...style,bottom:itemspace*count++}}>\r\n                    {m}\r\n                  </div>\r\n              </Dragger>\r\n            )\r\n          }\r\n\r\n          //items.push(<div key ={\"bar3\"} style={{padding:10,position:\"absolute\",bottom:itemspace*3,width:\"100%\",borderTop:\"1px solid #999999\"}}></div>)\r\n\r\n          items.push(<div key={\"bar3\"} style={{padding:4,position:\"absolute\",bottom:itemspace*2,width:\"80%\",borderTop:\"1px solid #888888\"}}></div>)\r\n\r\n          */\r\n\r\n\r\n\r\n          items.push(\r\n            <div style={{...positionStyle,bottom:itemspace*1}}>\r\n              <div onMouseUp={()=>{\r\n                  console.log(\"copying global to canvas\")\r\n                global.graph.canvas.copyToClipboard()\r\n                let item = localStorage.getItem(\"litegrapheditor_clipboard\")\r\n                console.log(item)\r\n\r\n                let webfile = `<?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n  <!DOCTYPE plist PUBLIC \"-//Apple//DTD PLIST 1.0//EN\" \"http://www.apple.com/DTDs/PropertyList-1.0.dtd\">\r\n  <plist version=\"1.0\">\r\n  <dict>\r\n    <key>URL</key>\r\n    <string>https://eth.build/`+codec.compress(item)+`</string>\r\n  </dict>\r\n  </plist>\r\n    `\r\n\r\n                var file = new Blob([item]);\r\n                var url = URL.createObjectURL( file );\r\n                var element = document.createElement(\"a\");\r\n                element.setAttribute('href', url);\r\n                element.setAttribute('download', \"eth.build.module\" );\r\n                element.style.display = 'none';\r\n                if(document.body){\r\n                  document.body.appendChild(element);\r\n                  element.click();\r\n                  document.body.removeChild(element);\r\n                  setTimeout( function(){ URL.revokeObjectURL( url ); }, 1000*60 );\r\n                  setOpenSaveDialog(false)\r\n                }\r\n              }} style={{...style,bottom:itemspace*1}}>\r\n                Save\r\n              </div>\r\n            </div>\r\n          )\r\n          items.push(\r\n            <div style={{...positionStyle,bottom:itemspace*2}}>\r\n              <div onMouseUp={()=>{\r\n                document.getElementById(\"moduleloader\").click()\r\n              }} style={{...style,bottom:0}}>\r\n                Load\r\n              </div>\r\n            </div>\r\n          )\r\n        }\r\n\r\n\r\n        if(width < 1000 && global.customNodes[n].name==\"Modules\"){\r\n          extraTabs.push(\r\n            <div onMouseLeave={mouseLeave} style={{position:\"absolute\",bottom:0,right:80,zIndex:3,cursor:\"pointer\",fontSize:tabFontSize, fontFamily: \"'Rubik Mono One', sans-serif\"}} onClick={()=>{setMenu(global.customNodes[n].name)}}>\r\n              <div style={{transform:\"rotate(90deg)\",transformOrigin:\"63% 52%\",height:itemspace*items.length+80,position:\"relative\",borderRadius:\"0px 0px 8px 8px\",padding:6,textAlign:\"center\",letterSpacing:-1,color:\"#888888\",backgroundColor:\"#222222\",opacity:0.9}}>\r\n\r\n                  {global.customNodes[n].name}\r\n\r\n\r\n                  {items}\r\n\r\n              </div>\r\n            </div>\r\n          )\r\n\r\n        } else if( global.customNodes[n].name==\"Modules\"){\r\n\r\n\r\n\r\n            extraTabs.push(\r\n              <div onMouseLeave={mouseLeave} style={{position:\"absolute\",bottom:0,right:80,zIndex:3,cursor:\"pointer\",fontSize:tabFontSize, fontFamily: \"'Rubik Mono One', sans-serif\"}} onClick={()=>{setMenu(global.customNodes[n].name)}}>\r\n                <div style={{height:itemspace*items.length+80,position:\"relative\",borderRadius:\"8px 8px 0px 0px\",padding:6,textAlign:\"center\",letterSpacing:-1,color:\"#888888\",backgroundColor:\"#222222\",opacity:0.9}}>\r\n\r\n                    {global.customNodes[n].name}\r\n\r\n\r\n                    {items}\r\n\r\n                </div>\r\n              </div>\r\n            )\r\n\r\n        }else if(width < 1000 && global.customNodes[n].name==\"Components\"){\r\n          extraTabs.push(\r\n            <div onMouseLeave={mouseLeave} style={{position:\"absolute\",bottom:0,left:80,zIndex:3,cursor:\"pointer\",fontSize:tabFontSize, fontFamily: \"'Rubik Mono One', sans-serif\"}} onClick={()=>{setMenu(global.customNodes[n].name)}}>\r\n              <div style={{transform:\"rotate(90deg)\",transformOrigin:\"46% 52%\",height:itemspace*items.length+80,position:\"relative\",borderRadius:\"0px 0px 8px 8px\",padding:6,textAlign:\"center\",letterSpacing:-1,color:\"#888888\",backgroundColor:\"#222222\",opacity:0.9}}>\r\n\r\n                  {global.customNodes[n].name}\r\n\r\n\r\n                  {items}\r\n\r\n              </div>\r\n            </div>\r\n          )\r\n\r\n\r\n        } else if(global.customNodes[n].name==\"Components\"){\r\n\r\n            extraTabs.push(\r\n              <div onMouseLeave={mouseLeave} style={{position:\"absolute\",bottom:0,left:80,zIndex:3,cursor:\"pointer\",fontSize:tabFontSize, fontFamily: \"'Rubik Mono One', sans-serif\"}} onClick={()=>{setMenu(global.customNodes[n].name)}}>\r\n                <div style={{height:itemspace*items.length+80,position:\"relative\",borderRadius:\"8px 8px 0px 0px\",padding:6,textAlign:\"center\",letterSpacing:-1,color:\"#888888\",backgroundColor:\"#222222\",opacity:0.9}}>\r\n\r\n                    {global.customNodes[n].name}\r\n\r\n\r\n                    {items}\r\n\r\n                </div>\r\n              </div>\r\n            )\r\n\r\n        }else{\r\n          customNodes.push(\r\n            <Grid key={\"girdder\"+n} onMouseLeave={mouseLeave}  item xs={1} style={{zIndex:3,cursor:\"pointer\",fontSize:tabFontSize, fontFamily: \"'Rubik Mono One', sans-serif\"}} onClick={()=>{setMenu(global.customNodes[n].name)}}>\r\n              <div style={{height:itemspace*items.length+80,position:\"relative\",borderRadius:\"0px 0px 8px 8px\",padding:6,textAlign:\"center\",letterSpacing:-1,color:\"#888888\",backgroundColor:\"#222222\",opacity:0.9}}>\r\n\r\n                  {width>800?global.customNodes[n].name:global.customNodes[n].icon}\r\n\r\n\r\n                  {items}\r\n\r\n              </div>\r\n            </Grid>\r\n          )\r\n        }\r\n\r\n\r\n      }else{\r\n        if(drawing){\r\n          if(global.customNodes[n].name!=\"Modules\" && global.customNodes[n].name!=\"Special\" && global.customNodes[n].name!=\"Components\"){\r\n            customNodes.push(\r\n              <Grid key={\"grd\"+n} onMouseLeave={mouseLeave}  onMouseEnter={mouseEnter.bind(this,global.customNodes[n].name)} item xs={1} style={{cursor:\"pointer\",letterSpacing:-3,fontSize:tabFontSize, fontFamily: \"'Rubik Mono One', sans-serif\"}} onClick={(e)=>{\r\n                  //console.log(\"SET COLOR\",global.customNodes[n].color)\r\n                  setDrawingColor(\"#\"+global.customNodes[n].color)\r\n                  global.graph.canvas.drawing = \"#\"+global.customNodes[n].color\r\n                  setDrawing(\"#\"+global.customNodes[n].color)\r\n                  global.graph.canvas.setDirty(true);\r\n                  global.graph.canvas.graph.change();\r\n\r\n                }}>\r\n                <div style={{borderRadius:\"0px 0px 8px 8px\",padding:6,paddingTop:16,paddingBottom:8,textAlign:\"center\",color:\"#222222\",height:20,backgroundColor:\"#\"+global.customNodes[n].color,opacity:0.6}}>\r\n\r\n                </div>\r\n              </Grid>\r\n            )\r\n\r\n          }\r\n\r\n          //setDrawingColor\r\n        }else if(width < 1000 && global.customNodes[n].name==\"Modules\"){\r\n          extraTabs.push(\r\n            <div  onMouseLeave={mouseLeave}  onMouseEnter={mouseEnter.bind(this,global.customNodes[n].name)}  style={{overflow:\"hidden\",position:\"absolute\",bottom:80,height:200,right:0,zIndex:3,cursor:\"pointer\",fontSize:tabFontSize, fontFamily: \"'Rubik Mono One', sans-serif\"}} onClick={(e)=>{\r\n\r\n                //if(e.pageY<height-80){\r\n                //  setMenu(\"\")\r\n                //}else{\r\n                  setMenu(global.customNodes[n].name)\r\n                //}\r\n              }}>\r\n              <div style={{transform:\"rotate(-90deg)\",transformOrigin:\"100px 30px\",borderRadius:\"8px 8px 0px 0px\",padding:6,textAlign:\"center\",color:\"#222222\",height:200,backgroundColor:\"#\"+global.customNodes[n].color,opacity:0.6}}>\r\n\r\n                  {global.customNodes[n].name}\r\n\r\n              </div>\r\n            </div>\r\n          )\r\n        }else if(global.customNodes[n].name==\"Modules\"){\r\n          extraTabs.push(\r\n            <div  onMouseLeave={mouseLeave}  onMouseEnter={mouseEnter.bind(this,global.customNodes[n].name)}  style={{position:\"absolute\",bottom:0,right:80,zIndex:3,cursor:\"pointer\",fontSize:tabFontSize, fontFamily: \"'Rubik Mono One', sans-serif\"}} onClick={(e)=>{\r\n\r\n                if(e.pageY<height-80){\r\n                  setMenu(\"\")\r\n                }else{\r\n                  setMenu(global.customNodes[n].name)\r\n                }\r\n              }}>\r\n              <div style={{borderRadius:\"8px 8px 0px 0px\",padding:6,textAlign:\"center\",color:\"#222222\",height:30,backgroundColor:\"#\"+global.customNodes[n].color,opacity:0.6}}>\r\n\r\n                  {global.customNodes[n].name}\r\n\r\n              </div>\r\n            </div>\r\n          )\r\n        }else if(width < 1000 && global.customNodes[n].name==\"Components\"){\r\n          extraTabs.push(\r\n            <div  onMouseLeave={mouseLeave}  onMouseEnter={mouseEnter.bind(this,global.customNodes[n].name)}  style={{overflow:\"hidden\",position:\"absolute\",bottom:80,height:200,left:0,zIndex:3,cursor:\"pointer\",fontSize:tabFontSize, fontFamily: \"'Rubik Mono One', sans-serif\"}} onClick={(e)=>{\r\n\r\n                //if(e.pageY<height-80){\r\n                //  setMenu(\"\")\r\n                //}else{\r\n                  setMenu(global.customNodes[n].name)\r\n                //}\r\n              }}>\r\n              <div style={{transform:\"rotate(90deg)\",transformOrigin:\"22px 30px\",borderRadius:\"8px 8px 0px 0px\",padding:6,textAlign:\"center\",color:\"#222222\",height:200,backgroundColor:\"#\"+global.customNodes[n].color,opacity:0.6}}>\r\n\r\n                  {global.customNodes[n].name}\r\n\r\n              </div>\r\n            </div>\r\n          )\r\n        }else if(global.customNodes[n].name==\"Components\"){\r\n          extraTabs.push(\r\n            <div  onMouseLeave={mouseLeave}  onMouseEnter={mouseEnter.bind(this,global.customNodes[n].name)}  style={{position:\"absolute\",bottom:0,left:80,zIndex:3,cursor:\"pointer\",fontSize:tabFontSize, fontFamily: \"'Rubik Mono One', sans-serif\"}} onClick={(e)=>{\r\n\r\n                if(e.pageY<height-80){\r\n                  setMenu(\"\")\r\n                }else{\r\n                  setMenu(global.customNodes[n].name)\r\n                }\r\n              }}>\r\n              <div style={{borderRadius:\"8px 8px 0px 0px\",padding:6,textAlign:\"center\",color:\"#222222\",height:30,backgroundColor:\"#\"+global.customNodes[n].color,opacity:0.6}}>\r\n\r\n                  {global.customNodes[n].name}\r\n\r\n              </div>\r\n            </div>\r\n          )\r\n        }else if( global.customNodes[n].name==\"Special\"){\r\n\r\n        }else{\r\n          customNodes.push(\r\n            <Grid key={\"grd\"+n} onMouseLeave={mouseLeave}  onMouseEnter={mouseEnter.bind(this,global.customNodes[n].name)} item xs={1} style={{cursor:\"pointer\",letterSpacing:-3,fontSize:tabFontSize, fontFamily: \"'Rubik Mono One', sans-serif\"}} onClick={(e)=>{\r\n\r\n                if(e.pageY>60){\r\n                  setMenu(\"\")\r\n                }else{\r\n                  setMenu(global.customNodes[n].name)\r\n                }\r\n              }}>\r\n              <div style={{borderRadius:\"0px 0px 8px 8px\",padding:6,paddingTop:16,paddingBottom:8,textAlign:\"center\",color:\"#222222\",height:20,backgroundColor:\"#\"+global.customNodes[n].color,opacity:0.6}}>\r\n\r\n                  {width>800?global.customNodes[n].name:global.customNodes[n].icon}\r\n\r\n              </div>\r\n            </Grid>\r\n          )\r\n        }\r\n      }\r\n\r\n    //}\r\n\r\n  }\r\n}\r\n\r\n\r\n\r\n\r\nlet clickawayscreen = \"\"\r\nif(!showVideoLibrary && !embed && menu){\r\n  clickawayscreen = (\r\n    <div ref={drop}  style={{position:\"absolute\",left:0,top:0,zIndex:1,width:\"100%\",height:\"100%\"}} onClick={()=>{setMenu(\"\");if(global.graph&&global.graph.canvas.search_box)  global.graph.canvas.search_box.close()}}></div>\r\n  )\r\n}\r\n\r\nlet tools = \"\"\r\n\r\n\r\nif(!showVideoLibrary && !embed && global.graph && global.graph.canvas){\r\n  //console.log(\"TOOLSm\",selectToolActive)\r\n  tools = (\r\n    <div>\r\n\r\n\r\n      <div style={{margin:5}} onClick={async (e)=>{\r\n          if(global.graph.canvas.search_box){\r\n            global.graph.canvas.search_box.close()\r\n            setMenu(\"\")\r\n          }else{\r\n            global.graph.canvas.last_mouse_position[0] = e.clientX-209\r\n            global.graph.canvas.last_mouse_position[1] = e.clientY\r\n            global.graph.canvas.showSearchBox()\r\n            //setMenu(\"search\")\r\n            setMenu(\"\")\r\n          }\r\n          global.graph.canvas.last_mouse_position[0] = width/2\r\n          global.graph.canvas.last_mouse_position[1] = height/2\r\n        }}>\r\n        <Tooltip title=\"Add Item [space bar]\" style={{marginLeft:4,cursor:\"pointer\"}}>\r\n          <Icon>\r\n            add_circle_outline\r\n          </Icon>\r\n        </Tooltip>\r\n      </div>\r\n\r\n\r\n\r\n      <div style={{margin:5}} onClick={async ()=>{\r\n          if(global.graph.canvas.search_box) global.graph.canvas.search_box.close()\r\n          global.graph.canvas.closeSubgraph()\r\n          global.graph.canvas.ds.reset()\r\n          global.graph.canvas.setDirty(true);\r\n          global.graph.canvas.graph.change();\r\n          setDrawing(\"\")\r\n          global.graph.canvas.drawing = false\r\n          global.graph.canvas.selectToolActive = false\r\n          setSelectToolActive(global.graph.canvas.selectToolActive)\r\n        }}>\r\n        <Tooltip title=\"Reorient [esc key]\" style={{marginLeft:4,cursor:\"pointer\"}}>\r\n          <Icon>\r\n            aspect_ratio\r\n          </Icon>\r\n        </Tooltip>\r\n      </div>\r\n\r\n      <div style={{margin:5,color:drawing?drawingColor:\"#dddddd\"}} onClick={toggleDraw}>\r\n        <Tooltip title=\"Draw\" style={{marginLeft:4,cursor:\"pointer\"}}>\r\n          <Icon>\r\n            create\r\n          </Icon>\r\n        </Tooltip>\r\n      </div>\r\n\r\n\r\n      <div style={{margin:5,color:selectToolActive?\"#03A9F4\":\"#dddddd\"}} onClick={async ()=>{\r\n          //console.log(JSON.stringify(global.graph.canvas.graph))\r\n          global.graph.canvas.selectToolActive = !global.graph.canvas.selectToolActive\r\n          setSelectToolActive(global.graph.canvas.selectToolActive)\r\n          setDrawing(\"\")\r\n          global.graph.canvas.drawing = false\r\n        }}>\r\n        <Tooltip title=\"Select [hold ctrl]\" style={{marginLeft:4,cursor:\"pointer\"}}>\r\n          <Icon>\r\n            photo_size_select_small\r\n          </Icon>\r\n        </Tooltip>\r\n      </div>\r\n\r\n\r\n\r\n            <div style={{margin:5}} onClick={async ()=>{\r\n                try{\r\n                  global.graph.canvas.copyToClipboard()\r\n\r\n                }catch(e){console.log(e)}\r\n              }}>\r\n              <Tooltip title=\"Copy [ctrl+c]\" style={{marginLeft:4,cursor:\"pointer\"}}>\r\n                <Icon>\r\n                  file_copy\r\n                </Icon>\r\n              </Tooltip>\r\n            </div>\r\n\r\n            <div style={{margin:5}} onClick={async ()=>{\r\n              global.graph.canvas.pasteFromClipboard()\r\n              global.graph.canvas.setDirty(true);\r\n              global.graph.canvas.graph.change();\r\n              }}>\r\n              <Tooltip title=\"Paste [ctrl+v]\" style={{marginLeft:4,cursor:\"pointer\"}}>\r\n                <Icon>\r\n                  dynamic_feed\r\n                </Icon>\r\n              </Tooltip>\r\n            </div>\r\n\r\n\r\n            <div style={{margin:5,color:moreInfo?\"#03A9F4\":\"#dddddd\"}} onClick={async ()=>{\r\n              global.graph.canvas.moreInfo = !global.graph.canvas.moreInfo\r\n              setMoreInfo(global.graph.canvas.moreInfo)\r\n              console.log(\"global.graph.canvas.moreInfo\",global.graph.canvas.moreInfo)\r\n              }}>\r\n              <Tooltip title=\"Properties\" style={{marginLeft:4,cursor:\"pointer\"}}>\r\n                <Icon>\r\n                  more\r\n                </Icon>\r\n              </Tooltip>\r\n            </div>\r\n\r\n\r\n      <div style={{margin:5}} onClick={async ()=>{\r\n          //console.log(JSON.stringify(global.graph.canvas.graph))\r\n          global.graph.canvas.selectNodes()\r\n        }}>\r\n        <Tooltip title=\"Select All [ctrl+a]\" style={{marginLeft:4,cursor:\"pointer\"}}>\r\n          <Icon>\r\n            select_all\r\n          </Icon>\r\n        </Tooltip>\r\n      </div>\r\n\r\n\r\n\r\n\r\n      <div style={{margin:5}} onClick={async ()=>{\r\n          //console.log(JSON.stringify(global.graph.canvas.graph))\r\n          global.graph.canvas.deleteSelectedNodes()\r\n          //console.log(\"global.graph.canvas\",global.graph.canvas)\r\n          global.LiteGraphJS.LiteGraph.closeAllContextMenus();\r\n          if(drawing){\r\n            //console.log(\"CLEAR INK FROM\",global.graph.canvas)\r\n            global.graph.canvas.ink = []\r\n            global.graph.canvas.setDirty(true);\r\n            global.graph.canvas.graph.change();\r\n          }\r\n        }}>\r\n        <Tooltip title=\"Delete Selected [delete key]\" style={{marginLeft:4,cursor:\"pointer\"}}>\r\n          <Icon>\r\n            delete\r\n          </Icon>\r\n        </Tooltip>\r\n      </div>\r\n\r\n\r\n\r\n\r\n    </div>\r\n\r\n  )\r\n}\r\n\r\nlet extraMenus = \"\"\r\nlet bottomMenu = \"\"\r\n\r\nbottomMenu = (\r\n  <div style={{zIndex:1,position:\"fixed\",height:barHeight,left:0,bottom:0,width:\"100%\"}}>\r\n    <div style={{borderRadius:\"8px 8px 0px 0px\",paddingLeft:6,margin:\"auto\",textAlign:\"left\",color:\"#222222\",height:barHeight,left:0,bottom:0,width:575,backgroundColor:\"#DFDFDF\"}}>\r\n      <div style={{cursor:\"pointer\",letterSpacing:-5,fontSize:32, fontFamily: \"'Rubik Mono One', sans-serif\"}}>\r\n\r\n        <span style={{margin:5,borderRight:\"1px solid #cccccc\",height:barHeight}} onClick={()=>{\r\n            if (liteGraphCanvas.live_mode === true) {\r\n                localStorage.setItem(\"liveMode\", \"Edit\")\r\n            } else {\r\n              localStorage.setItem(\"liveMode\", \"View\")\r\n            }\r\n\r\n            liteGraphCanvas.switchLiveMode(true);\r\n            setLive(!live)\r\n            liteGraphCanvas.draw();\r\n          }}>\r\n          <Tooltip title={live?\"Edit\":\"View\"} style={{marginRight:10,cursor:\"pointer\"}}>\r\n            <Icon>\r\n              {live?\"create\":\"visibility\"}\r\n            </Icon>\r\n          </Tooltip>\r\n        </span>\r\n        <span style={{margin:5,borderRight:\"1px solid #cccccc\",height:barHeight}} onClick={()=>{\r\n            //console.log(liteGraph.status,playing)//cccccc.status==2\r\n            if(playing){\r\n              liteGraph.start()\r\n              setPlaying(false)\r\n            }else{\r\n              liteGraph.stop()\r\n              setPlaying(true)\r\n            }\r\n          }}>\r\n          <Tooltip title={playing?\"Playing\":\"Fast Forwarding\"} style={{marginRight:10,cursor:\"pointer\"}}>\r\n            <Icon>\r\n              {playing ? \"play_circle_outline\":\"fast_forward\"}\r\n            </Icon>\r\n          </Tooltip>\r\n        </span>\r\n\r\n        <span onClick={()=>{setShowVideoLibrary(true);global.showLibrary=true;localStorage.setItem(\"eth.build.showLibrary\",true);}}\r\n          onTouchStart={()=>{setShowVideoLibrary(true);global.showLibrary=true;localStorage.setItem(\"eth.build.showLibrary\",true);}}\r\n        >\r\n          <span style={{color:\"#03a9f4\"}}>eth</span>\r\n          <span style={{position:'relative',left:-5,bottom:15,color:\"#f44336\",marginBottom:25}}>.</span>\r\n          <span style={{position:'relative',left:-10,color:\"#333\"}}>build</span>\r\n        </span>\r\n\r\n        <span style={{margin:5,borderLeft:\"1px solid #cccccc\",height:barHeight}} onClick={()=>{\r\n            handleOpenSaveDialog()\r\n          }}>\r\n          <Tooltip title=\"Save\" style={{marginLeft:10,cursor:\"pointer\"}}>\r\n            <Icon>\r\n              save\r\n            </Icon>\r\n          </Tooltip>\r\n        </span>\r\n        <span style={{margin:5,borderLeft:\"1px solid #cccccc\",height:barHeight}} onClick={async ()=>{\r\n            // document.getElementById(\"loadjsonfile\").click()\r\n            setOpenLoadDialog(true);\r\n          }}>\r\n          <Tooltip title=\"Load\" style={{marginLeft:10,cursor:\"pointer\"}}>\r\n            <Icon>\r\n              open_in_browser\r\n            </Icon>\r\n          </Tooltip>\r\n        </span>\r\n        <span style={{margin:5,borderLeft:\"1px solid #cccccc\",height:barHeight}} onClick={async ()=>{\r\n            setOpenAboutDialog(true)\r\n          }}>\r\n          <Tooltip title=\"About\" style={{marginLeft:10,cursor:\"pointer\"}}>\r\n            <Icon>\r\n              info\r\n            </Icon>\r\n          </Tooltip>\r\n        </span>\r\n\r\n        <span style={{margin:5,paddingLeft:10,borderLeft:\"1px solid #cccccc\",height:barHeight}} onClick={async ()=>{\r\n            setReadQr(!readQr)\r\n          }}>\r\n          <Tooltip title=\"Scan\" style={{marginLeft:10,cursor:\"pointer\"}}>\r\n            <svg style={{width:24,height:24,opacity:0.95}} viewBox=\"0 0 24 24\">\r\n              <path fill=\"#000000\" d=\"M4,4H10V10H4V4M20,4V10H14V4H20M14,15H16V13H14V11H16V13H18V11H20V13H18V15H20V18H18V20H16V18H13V20H11V16H14V15M16,15V18H18V15H16M4,20V14H10V20H4M6,6V8H8V6H6M16,6V8H18V6H16M6,16V18H8V16H6M4,11H6V13H4V11M9,11H13V15H11V13H9V11M11,6H13V10H11V6M2,2V6H0V2A2,2 0 0,1 2,0H6V2H2M22,0A2,2 0 0,1 24,2V6H22V2H18V0H22M2,18V22H6V24H2A2,2 0 0,1 0,22V18H2M22,22V18H24V22A2,2 0 0,1 22,24H18V22H22Z\" />\r\n            </svg>\r\n          </Tooltip>\r\n        </span>\r\n\r\n        <span style={{margin:5,borderLeft:\"1px solid #cccccc\",height:barHeight}} onClick={async ()=>{\r\n            setOpenSettingsDialog(true)\r\n            console.log(\"SDF\")\r\n          }}>\r\n          <Tooltip title=\"Settings\" style={{marginLeft:10,cursor:\"pointer\"}}>\r\n            <Icon>\r\n              build\r\n            </Icon>\r\n          </Tooltip>\r\n        </span>\r\n\r\n        <span style={{margin:5,borderLeft:\"1px solid #cccccc\",height:barHeight}} onClick={async ()=>{\r\n            setShowVideoLibrary(true);global.showLibrary=true;localStorage.setItem(\"eth.build.showLibrary\",true)\r\n          }}>\r\n          <Tooltip title=\"Learn More\" style={{marginLeft:10,cursor:\"pointer\"}}>\r\n            <Icon>\r\n              swap_vert\r\n            </Icon>\r\n          </Tooltip>\r\n        </span>\r\n\r\n      </div>\r\n    </div>\r\n  </div>\r\n)\r\n\r\nif(!showVideoLibrary && !embed){\r\n  extraMenus = (\r\n    <div>\r\n      <div style={{zIndex:8,position:\"fixed\",right:0,top:\"20%\",width:50}}>\r\n        <div style={{borderRadius:\"8px 0px 0px 8px\",textAlign:\"left\",color:\"#dddddd\",height:400,right:0,top:0,width:475,backgroundColor:\"#333333\"}}>\r\n          <div style={{cursor:\"pointer\",letterSpacing:-5,fontSize:32, fontFamily: \"'Rubik Mono One', sans-serif\"}}>\r\n\r\n            {tools}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div style={{zIndex:2,marginRight:8,position:\"fixed\",width:width-16,left:8,top:0}} ref={drop2} >\r\n        <Grid container spacing={3}>\r\n          {customNodes}\r\n        </Grid>\r\n      </div>\r\n\r\n      {extraTabs}\r\n\r\n      {clickawayscreen}\r\n    </div>\r\n  )\r\n}\r\n\r\nlet qrReader = \"\"\r\nif(readQr){\r\n  qrReader = (\r\n    <div style={{zIndex:5,position:\"absolute\",left:0,top:0,width:\"100%\",height:\"100%\",backgroundColor:\"#111111\",}} onClick={()=>{setReadQr(false)}}>\r\n      <QrReader\r\n        delay={500}\r\n        onError={(e)=>{\r\n          console.log(\"ERROR\",e)\r\n        }}\r\n        onScan={(result)=>{\r\n          console.log(\"SCAN\",result)\r\n          if(result){\r\n            if(result.indexOf(\"http\")>=0){\r\n              window.location = result\r\n            }else{\r\n              window.location = \"https://eth.build/\"+result\r\n            }\r\n          }\r\n        }}\r\n        style={{ margin:\"auto\", maxWidth: \"80%\", maxHeight: \"80%\"}}\r\n        resolution={1200}\r\n      />\r\n    </div>\r\n  )\r\n}\r\n\r\nreturn (\r\n  <div className=\"App\" style={{color:\"#FFFFFF\"}}>\r\n    {qrReader}\r\n\r\n    {extraMenus}\r\n\r\n    <AboutDialog setOpenAboutDialog={setOpenAboutDialog} openAboutDialog={openAboutDialog}/>\r\n    <SettingsDialog setOpenSettingsDialog={setOpenSettingsDialog} openSettingsDialog={openSettingsDialog}/>\r\n    <SaveDialog liteGraph={liteGraph} setOpenSaveDialog={setOpenSaveDialog} openSaveDialog={openSaveDialog} dynamicWidth={dynamicWidth} screenshot={currentScreenShot} />\r\n    <LoadDialog liteGraph={liteGraph} setOpenLoadDialog={setOpenLoadDialog} openLoadDialog={openLoadDialog} dynamicWidth={dynamicWidth} live={live} />\r\n\r\n    {!embed ? bottomMenu : null }\r\n\r\n\r\n\r\n\r\n\r\n    {/* <div style={{position:'absolute',bottom:-100000,left:-100000}}>\r\n      <span style={{border:'1px solid #777777',color:live?\"#00ff00\":\"#0000ff\",padding:5,cursor:\"pointer\"}}>\r\n        <input id=\"loadjsonfile\" type=\"file\" name=\"file\" onChange={(e)=>{\r\n            console.log(\"FILE\",e.target.files[0])\r\n            var reader = new FileReader();\r\n            reader.onload = (event) => {\r\n              let compressedString = event.target.result\r\n              //console.log(\"compressedString\",compressedString)\r\n              let loc = compressedString.indexOf(\"<string>\")\r\n              if(loc>0){\r\n                loc += 8\r\n                let endloc = compressedString.indexOf(\"</string>\",loc)\r\n                //console.log(\"loc\",loc,\"endloc\",endloc)\r\n                compressedString = compressedString.substr(loc,endloc-loc)\r\n                compressedString = compressedString.substr(compressedString.lastIndexOf(\"/\")+1)\r\n              }\r\n              console.log(\"decompress:\",compressedString)\r\n              codec.decompress(compressedString).then(json => {\r\n                console.log(\"configure graph with:\",json)\r\n                if(json){\r\n                  localStorage.setItem(\"litegraph\",JSON.stringify(json));\r\n                  liteGraph.configure( json );\r\n                }\r\n              })\r\n            }\r\n            try{\r\n              reader.readAsText(e.target.files[0])\r\n            }catch(e){console.log(e)}\r\n          }}>\r\n        </input>\r\n      </span>\r\n    </div> */}\r\n\r\n    <div style={{position:'absolute',bottom:-100000,left:-100000}}>\r\n      <span style={{border:'1px solid #777777',color:live?\"#00ff00\":\"#0000ff\",padding:5,cursor:\"pointer\"}}>\r\n        <input id=\"moduleloader\" type=\"file\" name=\"file\" onChange={(e)=>{\r\n            console.log(\"FILE\",e.target.files[0])\r\n            var reader = new FileReader();\r\n            reader.onload = (event) => {\r\n              let compressedString = event.target.result\r\n\r\n              /*\r\n              let loc = compressedString.indexOf(\"<string>\")\r\n              if(loc>0){\r\n                loc += 8\r\n                let endloc = compressedString.indexOf(\"</string>\",loc)\r\n                compressedString = compressedString.substr(loc,endloc-loc)\r\n                compressedString = compressedString.substr(compressedString.lastIndexOf(\"/\")+1)\r\n              }\r\n              console.log(\"decompress:\",compressedString)*/\r\n\r\n\r\n                if(compressedString){\r\n                  let json = compressedString\r\n                  //  codec.decompress(compressedString).then(json => {\r\n                      /////////\r\n                      console.log(\"CLIP:\",json)\r\n                      localStorage.setItem(\"litegrapheditor_clipboard\",json)\r\n                      global.graph.canvas.last_mouse_position[0] = width/2\r\n                      global.graph.canvas.last_mouse_position[1] = height/2\r\n                      global.graph.canvas.pasteFromClipboard()\r\n                      global.graph.canvas.setDirty(true);\r\n                      global.graph.canvas.graph.change();\r\n                  //  })\r\n\r\n                }\r\n\r\n            }\r\n            try{\r\n              reader.readAsText(e.target.files[0])\r\n            }catch(e){console.log(e)}\r\n          }}>\r\n        </input>\r\n      </span>\r\n    </div>\r\n\r\n\r\n    <div id=\"mainCanvas\" style={{position:\"relative\",overflow:'hidden',background:\"#222\",width:'100%',height:\"100%\"}}>\r\n      <canvas id='main' width={Math.max(100,width)} height={Math.max(100,height)} tabIndex={10} style={{background:\"#111111\",outline: 'none',borderBottom:'1px solid #666666'}}></canvas>\r\n      <div id=\"reactElements\"></div>\r\n    </div>\r\n\r\n    <canvas id=\"chart\"  style={{outline: 'none', position:'absolute',left:-10000,top:-10000,zIndex:-1,width:320,height:240}}></canvas>\r\n\r\n    <div id=\"clipboarddiv\" style={{position:'absolute',left:-10000,top:-10000,zIndex:-1}}></div>\r\n\r\n\r\n    <Drawer\r\n      variant=\"persistent\"\r\n      anchor=\"bottom\"\r\n      open={showVideoLibrary}\r\n      >\r\n      <div style={{height:height*0.6,backgroundColor:\"#eeeeee\"}}>\r\n        <div style={{margin:\"auto\",textAlign:\"center\",color:\"#222222\",height:barHeight+3,left:0,bottom:0,width:\"100%\",backgroundColor:\"#DFDFDF\"}}>\r\n          <div style={{cursor:\"pointer\",letterSpacing:-5,borderBottom:\"1px solid #999999\",borderLeft:\"1px solid #999999\",borderRight:\"1px solid #999999\",fontSize:32, fontFamily: \"'Rubik Mono One', sans-serif\"}}\r\n            onTouchStart={\r\n              async ()=>{\r\n                setShowVideoLibrary(false);global.showLibrary=false;\r\n                localStorage.setItem(\"eth.build.showLibrary\",false)\r\n              }\r\n            }\r\n            onClick={async ()=>{\r\n              setShowVideoLibrary(false);global.showLibrary=false;\r\n              localStorage.setItem(\"eth.build.showLibrary\",false)\r\n            }}>\r\n            <span style={{color:\"#03a9f4\"}}>eth</span>\r\n            <span style={{position:'relative',left:-5,bottom:15,color:\"#f44336\",marginBottom:25}}>.</span>\r\n            <span style={{position:'relative',left:-10,color:\"#333\"}}>build</span>\r\n            <span style={{margin:5,borderLeft:\"1px solid #BBBBBB\",height:barHeight}}>\r\n              <Tooltip title=\"Collapse\" style={{marginLeft:10,cursor:\"pointer\"}}>\r\n                <Icon>\r\n                  swap_vert\r\n                </Icon>\r\n              </Tooltip>\r\n            </span>\r\n          </div>\r\n          <div>\r\n            <StackGrid columnWidth={350}>\r\n              {allCards}\r\n            </StackGrid>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </Drawer>\r\n\r\n\r\n    <Snackbar\r\n        anchorOrigin={{vertical: 'bottom', horizontal: 'center'}}\r\n        key={'bottomcentersnackbar'}\r\n        open={snackbar && snackbar.msg && snackbar.msg!=\"\"}\r\n        onClose={()=>{setSnackbar({msg:\"\",color:\"\"})}}\r\n        ContentProps={{\r\n          'aria-describedby': 'message-id',\r\n        }}\r\n        style={{marginBottom:100}}\r\n        message={<span id=\"message-id\" style={{fontFamily: \"monospace\",color:snackbar.color?snackbar.color:\"#d33535\",fontSize:22}}>{snackbar.msg}</span>}\r\n      />\r\n  </div>\r\n);\r\n}\r\n\r\n//,borderRadius:\"16px 16px 0px 0px\"\r\n\r\n\r\nfunction useWindowSize() {\r\n  let [size, setSize] = React.useState([0, 0]);\r\n  React.useLayoutEffect(() => {\r\n    function updateSize() {\r\n      setSize([(window.clientWidth||window.scrollWidth||window.innerWidth),(window.clientHeight||window.scrollHeight||window.innerHeight)-8]);\r\n    }\r\n    window.addEventListener('resize', updateSize);\r\n    updateSize();\r\n    return () => window.removeEventListener('resize', updateSize);\r\n  }, []);\r\n  return size;\r\n}\r\n\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom'\r\nconst hexRgb = require('hex-rgb');\r\n\r\nfunction addHelpers(obj){\r\n\r\n  if(!obj.prototype.title_font) obj.prototype.title_font = \"bold 18px 'Rubik Mono One', sans-serif\"\r\n\r\n  obj.prototype.sayHello = function() {\r\n    console.log(\"HELLO\")\r\n  }\r\n\r\n\r\n\r\n  obj.prototype.render = function(reactElement) {\r\n    //console.log(\"REACT RENDER!\")\r\n    if(!document.getElementById(this.id+\"_react_element\")){\r\n      var node = document.createElement(\"div\");\r\n      node.id = this.id+\"_react_element\"\r\n      try{\r\n        document.getElementById(\"reactElements\").appendChild(node);\r\n      }catch(e){console.log(e)}\r\n    }\r\n    //console.log(\"RENDER\",this.graph)\r\n    if(this.graph && this.graph.canvas && this.graph.canvas.ds){\r\n      ReactDOM.render((\r\n        <div key={this.id+\"_react_key\"} style={{\r\n          position:'absolute',\r\n          left:(20+this.pos[0]+this.graph.canvas.ds.offset[0])*this.graph.canvas.ds.scale,\r\n          top:(this.pos[1]+this.graph.canvas.ds.offset[1])*this.graph.canvas.ds.scale,\r\n          width:((this.size[0]-40)*this.graph.canvas.ds.scale),\r\n          height:((this.size[1])*this.graph.canvas.ds.scale),\r\n          borderRadius: \"0px 0px 7px 7px\",\r\n        }}>\r\n        <div stlye={{transform:\"scale(\"+this.graph.canvas.ds.scale+\")\"}}>\r\n        {reactElement}\r\n        </div>\r\n        </div>\r\n      ), document.getElementById(this.id+\"_react_element\"));\r\n    }else if(this.graph && this.graph._subgraph_node){\r\n      //console.log(\"SUBGRAPH IS STILL SENT?\")\r\n      let graph = this.graph._subgraph_node.graph\r\n      let canvas = this.graph._subgraph_node.graph.canvas\r\n      if(!canvas){\r\n        canvas = graph._subgraph_node.graph.canvas\r\n      }\r\n      if(canvas){\r\n        ReactDOM.render((\r\n          <div key={this.id+\"_react_key\"} style={{\r\n            position:'absolute',\r\n            left:(20+this.pos[0]+canvas.ds.offset[0])*canvas.ds.scale,\r\n            top:(this.pos[1]+canvas.ds.offset[1])*canvas.ds.scale,\r\n            width:((this.size[0]-40)*canvas.ds.scale),\r\n            height:((this.size[1])*canvas.ds.scale),\r\n            borderRadius: \"0px 0px 7px 7px\",\r\n          }}>\r\n          <div stlye={{transform:\"scale(\"+canvas.ds.scale+\")\"}}>\r\n          {reactElement}\r\n          </div>\r\n          </div>\r\n        ), document.getElementById(this.id+\"_react_element\"));\r\n      }else{\r\n        console.log(\"no graph.canvas I bet it is sub sub module\",canvas,graph._subgraph_node.graph.canvas)\r\n      }\r\n\r\n    }\r\n\r\n  }\r\n\r\n  //uppercase title of all nodes if not collapsed\r\n  /*obj.prototype.originalGetTitle = obj.prototype.getTitle\r\n  obj.prototype.getTitle = function(){\r\n    let title = \"\"\r\n    if(typeof   obj.prototype.originalGetTitle == \"function\")  title = obj.prototype.originalGetTitle()\r\n    if(!title) title=obj.prototype.name\r\n    if(obj.flags && !obj.flags.collapsed && title && typeof title.toUpperCase == \"function\") title = title.toUpperCase()\r\n    return title\r\n  }*/\r\n\r\n  //auto complete on double click\r\n  obj.prototype.originalOnOutputDblClick = obj.prototype.onOutputDblClick\r\n  obj.prototype.onOutputDblClick = function(index,e){\r\n    if(typeof   obj.prototype.originalOnOutputDblClick == \"function\")   obj.prototype.originalOnOutputDblClick()\r\n\r\n    console.log(\"DOUBLECKICK OUTTY\")\r\n\r\n    if(this.outputs[index].type == -1){\r\n      var node_watch = globalLiteGraphJS.LiteGraph.createNode(\"Display/Action\");\r\n      node_watch.pos = [e.canvasX+90,e.canvasY-25];\r\n      this.graph.add(node_watch);\r\n      this.connect(index, node_watch, 0 );\r\n    }else if(this.outputs[index].type == \"contractCall\"){\r\n      var node_watch = globalLiteGraphJS.LiteGraph.createNode(\"Web3/Call\");\r\n      node_watch.pos = [e.canvasX+90,e.canvasY-25];\r\n      this.graph.add(node_watch);\r\n      this.connect(index, node_watch, 0 );\r\n    }else if(this.outputs[index].type == \"contractFunction\"){\r\n      var node_watch = globalLiteGraphJS.LiteGraph.createNode(\"Web3/Function\");\r\n      node_watch.pos = [e.canvasX+90,e.canvasY-25];\r\n      this.graph.add(node_watch);\r\n      this.connect(index, node_watch, 0 );\r\n    }else if(this.outputs[index].type == \"function\"){\r\n      var node_watch = globalLiteGraphJS.LiteGraph.createNode(\"Utils/Function\");\r\n      node_watch.pos = [e.canvasX+90,e.canvasY-25];\r\n      this.graph.add(node_watch);\r\n      this.connect(index, node_watch, 0 );\r\n    }else{\r\n\r\n\r\n      if(this.outputs[index] && this.outputs[index]._data && typeof this.outputs[index]._data.substr == \"function\" && this.outputs[index]._data.length == 42 && this.outputs[index]._data.substr(0,2)==\"0x\"){\r\n        var node_watch = globalLiteGraphJS.LiteGraph.createNode(\"Display/Address\");\r\n        node_watch.pos = [e.canvasX+90,e.canvasY-25];\r\n        this.graph.add(node_watch);\r\n        this.connect(index, node_watch, 0 );\r\n      }else if(this.outputs[index] && this.outputs[index]._data && typeof this.outputs[index]._data.substr == \"function\" && this.outputs[index]._data.length > 96){\r\n        var node_watch = globalLiteGraphJS.LiteGraph.createNode(\"Display/TextArea\");\r\n        node_watch.pos = [e.canvasX+90,e.canvasY-25];\r\n        this.graph.add(node_watch);\r\n        this.connect(index, node_watch, 0 );\r\n      }else{\r\n        var node_watch = globalLiteGraphJS.LiteGraph.createNode(\"Display/Watch\");\r\n        node_watch.pos = [e.canvasX+90,e.canvasY-25];\r\n        this.graph.add(node_watch);\r\n        this.connect(index, node_watch, 0 );\r\n      }\r\n\r\n\r\n    }\r\n\r\n  }\r\n\r\n\r\n  obj.prototype.originalOnInputDblClick = obj.prototype.onInputDblClick\r\n  obj.prototype.onInputDblClick = function(index,e){\r\n    if(typeof obj.prototype.originalOnInputDblClick == \"function\")   obj.prototype.originalOnInputDblClick()\r\n    if(this.inputs[index].type == -1){\r\n      if(this.type == \"Input/Button\"){\r\n        //this is an action, let's attach a button to it automatically\r\n        var node_button = globalLiteGraphJS.LiteGraph.createNode(\"Control/Timer\");\r\n        node_button.pos = [e.canvasX-280,e.canvasY];\r\n        this.graph.add(node_button);\r\n        //i have no idea why, but I have to do this to make it work:\r\n        let that = this\r\n        setTimeout(()=>{\r\n          node_button.connect(0, that, index);\r\n        },1)\r\n      }else{\r\n        //this is an action, let's attach a button to it automatically\r\n        var node_button = globalLiteGraphJS.LiteGraph.createNode(\"Input/Button\");\r\n        node_button.pos = [e.canvasX-280,e.canvasY];\r\n        this.graph.add(node_button);\r\n        //i have no idea why, but I have to do this to make it work:\r\n        let that = this\r\n        setTimeout(()=>{\r\n          node_button.connect(0, that, index);\r\n        },1)\r\n      }\r\n\r\n    }else if(this.inputs[index].type&& this.inputs[index].type.indexOf(\"string\")==0){\r\n      var node_text = globalLiteGraphJS.LiteGraph.createNode(\"Input/Text\");\r\n      node_text.pos = [e.canvasX-380,e.canvasY];\r\n      this.graph.add(node_text);\r\n      //i have no idea why, but I have to do this to make it work:\r\n      let that = this\r\n      setTimeout(()=>{\r\n        node_text.connect(0, that, index);\r\n      },1)\r\n    }else if(this.inputs[index].type&& this.inputs[index].type.indexOf(\"object\")==0){\r\n      var node_text = globalLiteGraphJS.LiteGraph.createNode(\"Object/Object\");\r\n      node_text.pos = [e.canvasX-380,e.canvasY];\r\n      this.graph.add(node_text);\r\n      //i have no idea why, but I have to do this to make it work:\r\n      let that = this\r\n      setTimeout(()=>{\r\n        node_text.connect(0, that, index);\r\n      },1)\r\n    }else if(this.inputs[index].type&& this.inputs[index].type.indexOf(\"number\")==0){\r\n      var node_number = globalLiteGraphJS.LiteGraph.createNode(\"Input/Number\");\r\n      node_number.pos = [e.canvasX-280,e.canvasY];\r\n      this.graph.add(node_number);\r\n      //i have no idea why, but I have to do this to make it work:\r\n      let that = this\r\n      setTimeout(()=>{\r\n        node_number.connect(0, that, index);\r\n      },1)\r\n    }{\r\n      console.log(\"unable to find automatic pair for \",this.inputs[index].type)\r\n    }\r\n  }\r\n\r\n\r\n\r\n  obj.prototype.originalOnDblClick = obj.prototype.onDblClick\r\n  obj.prototype.onDblClick = function(e,location,canvas){\r\n    console.log(\"DBLCLICK\",e,location,canvas)\r\n    if(this.graph && this.graph.canvas && this.graph.canvas.moreInfo){\r\n\r\n      console.log(\"THIS\",this)\r\n      this.graph.canvas.processContextMenu(this, e);\r\n    }\r\n\r\n    if(typeof this.originalOnDblClick == \"function\") this.originalOnDblClick(e,location,canvas)\r\n  }\r\n\r\n  obj.prototype.destory = function() {\r\n    let possibleReactElement = document.getElementById(this.id+\"_react_element\")\r\n    if(possibleReactElement){\r\n      possibleReactElement.remove()\r\n    }\r\n  }\r\n\r\n  obj.prototype.originalonHide = obj.prototype.onHideNode\r\n  obj.prototype.onHideNode = function() {\r\n    if(typeof obj.prototype.originalonHide == \"function\") obj.prototype.originalonHide()\r\n    this.destory()\r\n  }\r\n\r\n\r\n  obj.prototype.originalOnRemoved = obj.prototype.onRemoved\r\n\r\n  obj.prototype.onRemoved = function(e) {\r\n    if(typeof obj.prototype.originalOnRemoved == \"function\") obj.prototype.originalOnRemoved()\r\n    this.destory()\r\n  }\r\n\r\n  return obj\r\n}\r\n\r\nconst addNodes = function(LiteGraphJS,name,color,shadow){\r\n  let nodeSet = require('./nodes/'+name)\r\n  if(!global.customNodeItems){\r\n    global.customNodeItems = {}\r\n  }\r\n  if(!global.customNodeItems[name]){\r\n    global.customNodeItems[name] = []\r\n  }\r\n  for(let n in nodeSet){\r\n\r\n    if(nodeSet[n].default){\r\n\r\n      //console.log(\"Importing \"+nodeSet[n].default.title+\" as \"+name)\r\n      let nodeObject = nodeSet[n].default\r\n      if(color && !nodeObject.title_color) nodeObject.title_color = color\r\n      if(shadow && !nodeObject.shadow_color) nodeObject.prototype.shadow_color = shadow\r\n      LiteGraphJS.LiteGraph.registerNodeType(name+\"/\"+nodeSet[n].default.title, addHelpers(nodeObject));\r\n      global.customNodeItems[name].push({title:nodeSet[n].default.title,color:nodeObject.title_color})\r\n    }\r\n  }\r\n}\r\n\r\nlet globalLiteGraphJS = null\r\n\r\nconst hexColor = (hex)=>{\r\n  let rgbVale = hexRgb(hex)\r\n  return [\"rgba(\"+rgbVale.red+\",\"+rgbVale.green+\",\"+rgbVale.blue+\")\",\"rgba(\"+rgbVale.red+\",\"+rgbVale.green+\",\"+rgbVale.blue+\",0.25)\"]\r\n}\r\n\r\n//\r\n//\r\n//\r\n\r\n\r\nglobal.customNodes = [\r\n  {name:\"Game3\",color:\"fc036b\",icon:\"\"},\r\n\r\n  // {name:\"Input\",color:\"3f51b5\",icon:\"\"},\r\n  // {name:\"Display\",color:\"357a38\",icon:\"\"},\r\n  // {name:\"Storage\",color:\"c1790e\",icon:\"\"},\r\n  // {name:\"Network\",color:\"b9a814\",icon:\"\"},\r\n  // {name:\"Crypto\",color:\"f44336\",icon:\"\"},\r\n  // {name:\"Web3\",color:\"03A9F4\",icon:\"\"},\r\n  // {name:\"Control\",color:\"a4a4a4\",icon:\"\"},\r\n  // {name:\"Math\",color:\"7fa9cb\",icon:\"\"},\r\n  // {name:\"Utils\",color:\"97784f\",icon:\"\"},\r\n  // {name:\"String\",color:\"6b6b6b\",icon:\"\"},\r\n  // {name:\"Object\",color:\"454545\",icon:\"\"},\r\n  // {name:\"Components\",color:\"009688\",icon:\"\"},\r\n  // {name:\"Special\",color:\"009688\",icon:\"\"},\r\n  // {name:\"System\",color:\"989898\",icon:\"\"},\r\n  // {name:\"Modules\",color:\"7e57c2\",icon:\"\"},\r\n]\r\n\r\n\r\n\r\n\r\nexport default function(LiteGraphJS){\r\n\r\n  globalLiteGraphJS = LiteGraphJS\r\n\r\n  for(let n in global.customNodes){\r\n    addNodes(LiteGraphJS,global.customNodes[n].name,...hexColor(global.customNodes[n].color))\r\n  }\r\n\r\n\r\n  console.log(\"HOOK INTO CLOSE AND OPEN OF SUBGRAPH TO DESTROY NODES?\",LiteGraphJS)\r\n  LiteGraphJS.LiteGraph.onClear = ()=>{\r\n    alert(\"CLEAR\")\r\n  }\r\n\r\n\r\n  /*function substr(str, start, length) {\r\n    if(str){\r\n      if(typeof start == \"undefined\"){\r\n        start = 0\r\n      }\r\n      if(typeof length == \"undefined\"){\r\n        length = str.length\r\n      }\r\n      return str.substr(start,length)\r\n    }\r\n    return \"\"\r\n  }\r\n  LiteGraphJS.LiteGraph.wrapFunctionAsNode(\r\n    \"String/Substring\",\r\n    substr,\r\n    [\"String\", \"Number\", \"Number\"],\r\n    \"String\"\r\n  );*/\r\n\r\n\r\n  /*\r\n  function split(a, b) {\r\n  if (a != null && a.constructor === String) {\r\n  return a.split(b || \"\\n\");\r\n}\r\nreturn [a];\r\n}\r\nLiteGraphJS.LiteGraph.wrapFunctionAsNode(\r\n\"string/split\",\r\nsplit,\r\n[\"String\", \"String\"],\r\n\"Array\"\r\n);\r\n*/\r\n\r\n}\r\n","import React from 'react';\r\nimport { useDrag } from 'react-dnd'\r\n\r\nfunction Dragger(props) {\r\n\r\n  const [{ isDragging }, drag] = useDrag({\r\n      item: {name:props.name,type:\"node\"},\r\n      end: (item, monitor) => {\r\n        //console.log(\"DROP\",item)\r\n        let event = window.event;\r\n        if (event.pageX == null && event.clientX != null) {\r\n           let eventDoc = (event.target && event.target.ownerDocument) || document;\r\n           let doc = eventDoc.documentElement;\r\n           let body = eventDoc.body;\r\n           event.pageX = event.clientX +\r\n             (doc && doc.scrollLeft || body && body.scrollLeft || 0) -\r\n             (doc && doc.clientLeft || body && body.clientLeft || 0);\r\n           event.pageY = event.clientY +\r\n             (doc && doc.scrollTop  || body && body.scrollTop  || 0) -\r\n             (doc && doc.clientTop  || body && body.clientTop  || 0 );\r\n        }\r\n        //console.log(event.pageX,event.pageY)\r\n        props.drop(props.name,event.pageX,event.pageY)\r\n      },\r\n      collect: monitor => ({\r\n        isDragging: monitor.isDragging(),\r\n      }),\r\n    })\r\n\r\n  return (\r\n    <div ref={drag}>\r\n      {props.children}\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\nexport default Dragger;\r\n","import React from \"react\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\n// import DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport \"litegraph.js/css/litegraph.css\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport Stepper from \"@material-ui/core/Stepper\";\r\nimport Step from \"@material-ui/core/Step\";\r\nimport StepLabel from \"@material-ui/core/StepLabel\";\r\nimport {\r\n  Button,\r\n  CardActions,\r\n  TextField,\r\n  SvgIcon,\r\n  Typography,\r\n  Tooltip,\r\n  // Switch,\r\n  // FormControlLabel,\r\n  Link\r\n} from \"@material-ui/core\";\r\nimport GetAppIcon from \"@material-ui/icons/GetApp\";\r\nimport ShareIcon from \"@material-ui/icons/Share\";\r\nimport FileCopyIcon from \"@material-ui/icons/FileCopy\";\r\nimport useWeb3Connect from \"../utils/useWeb3Connect\";\r\nimport {\r\n  open3Box,\r\n  logout3Box,\r\n  getSpace,\r\n  getBox,\r\n  isFetching\r\n} from \"../utils/3BoxManager\";\r\n\r\nimport moment from \"moment\";\r\n\r\nimport Box from \"3box\";\r\nimport ProfileHover from \"profile-hover\";\r\nimport { getDocumentInfo, saveDocument } from \"../utils/Documents3BoxSpace\";\r\n\r\nconst STORAGE_3BOX_DOCUMENT = \"eth.build.documentTitle3Box\";\r\n\r\nvar codec = require(\"json-url\")(\"lzw\");\r\nvar QRCode = require(\"qrcode.react\");\r\nconst axios = require(\"axios\");\r\n\r\nconst useStyles = makeStyles({\r\n  button: {\r\n    width: 200\r\n  }\r\n});\r\n\r\nconst ThreeBoxIcon = props => {\r\n  return (\r\n    <SvgIcon {...props} viewBox=\"0 0 290 289\">\r\n      <path\r\n        d=\"M42 0H248C271.196 0 290 18.804 290 42V247C290 270.196 271.196 289 248 289H42C18.804 289 0 270.196 0 247V42C0 18.804 18.804 0 42 0ZM146.438 47.823C137.893 47.823 129.906 49.0022 122.474 51.3607C115.043 53.7193 108.457 57.2347 102.716 61.9072C96.9757 66.5798 92.192 72.4092 88.365 79.3958C84.538 86.3823 81.957 94.5035 80.622 103.759L97.977 106.83C99.579 107.097 101.092 107.23 102.516 107.23C105.542 107.23 107.989 106.496 109.858 105.028C111.728 103.559 113.196 101.134 114.264 97.752C116.311 91.255 119.915 85.9373 125.077 81.7988C130.24 77.6602 136.736 75.591 144.568 75.591C153.202 75.591 160.01 77.9272 164.994 82.5997C169.978 87.2723 172.47 94.192 172.47 103.359C172.47 107.631 171.847 111.547 170.601 115.107C169.355 118.667 167.152 121.715 163.993 124.252C160.833 126.788 156.584 128.768 151.243 130.193C145.903 131.617 139.184 132.373 131.085 132.462V155.958C140.875 155.958 148.685 156.714 154.514 158.227C160.344 159.741 164.816 161.832 167.931 164.502C171.046 167.172 173.093 170.398 174.072 174.181C175.051 177.963 175.54 182.168 175.54 186.796C175.54 190.446 174.851 194.072 173.471 197.677C172.092 201.281 170 204.552 167.197 207.489C164.393 210.426 160.9 212.807 156.717 214.631C152.534 216.456 147.639 217.368 142.032 217.368C137.048 217.368 132.754 216.634 129.149 215.165C125.545 213.697 122.408 211.783 119.738 209.425C117.067 207.066 114.776 204.374 112.862 201.348C110.949 198.322 109.191 195.252 107.589 192.137C106.61 190.267 105.208 188.844 103.384 187.865C101.559 186.885 99.49 186.396 97.176 186.396C94.595 186.396 92.0585 186.93 89.5665 187.998L75.015 194.005C77.685 202.283 80.889 209.58 84.627 215.9C88.365 222.219 92.904 227.558 98.244 231.919C103.584 236.281 109.858 239.573 117.067 241.798C124.277 244.024 132.731 245.136 142.432 245.136C151.333 245.136 159.765 243.846 167.731 241.264C175.696 238.683 182.705 234.879 188.757 229.85C194.809 224.822 199.615 218.614 203.175 211.227C206.735 203.84 208.515 195.341 208.515 185.729C208.515 174.425 205.667 165.036 199.971 157.56C194.275 150.084 185.642 144.522 174.072 140.872C178.878 139.27 183.172 137.268 186.955 134.865C190.737 132.462 193.941 129.525 196.567 126.054C199.192 122.583 201.195 118.511 202.574 113.839C203.954 109.166 204.643 103.76 204.643 97.6185C204.643 90.5875 203.286 84.046 200.572 77.994C197.857 71.942 193.964 66.6688 188.891 62.1743C183.817 57.6797 177.699 54.1643 170.534 51.6278C163.37 49.0912 155.338 47.823 146.438 47.823Z\"\r\n        fill=\"white\"\r\n      />\r\n    </SvgIcon>\r\n  );\r\n};\r\n\r\nfunction SaveDialog(props) {\r\n  const {\r\n    liteGraph,\r\n    setOpenSaveDialog,\r\n    openSaveDialog,\r\n    dynamicWidth,\r\n    screenshot\r\n  } = props;\r\n\r\n  const classes = useStyles();\r\n\r\n  const [saveType, setSaveType] = React.useState(null);\r\n  const [shared, setShared] = React.useState();\r\n\r\n  const [compressed, setCompressed] = React.useState();\r\n\r\n  const [documentTitle, setDocumentTitle] = React.useState(\"\");\r\n  // const [publicDocument, setPublicDocument] = React.useState(false);\r\n  const [currentDocumentInfo, setCurrentDocumentInfo] = React.useState(null);\r\n  // const [lastCheckedTitle, setLastCheckedTitle] = React.useState(null);\r\n  const [updateTimer, setUpdateTimer] = React.useState(null);\r\n\r\n  const web3Connect = useWeb3Connect();\r\n  // const [box, threeBoxSpace, open3Box, fetching3Box, logout3Box] = use3Box(\r\n  //   web3Connect.address,\r\n  //   web3Connect.provider\r\n  // );\r\n  const connected = web3Connect.connected;\r\n\r\n  const [threeBoxStatus, setThreeBoxStatus] = React.useState(null);\r\n  const [threeBoxConnectionStep, setThreeBoxConnectionStep] = React.useState(0);\r\n  const [saving, setSaving] = React.useState(false);\r\n\r\n  const handleClose = () => {\r\n    setOpenSaveDialog(false);\r\n    setSaveType(null);\r\n    setThreeBoxStatus(null);\r\n    setThreeBoxConnectionStep(0);\r\n    clearTimeout(updateTimer);\r\n    setUpdateTimer(null);\r\n    setSaving(false);\r\n  };\r\n\r\n  React.useEffect(() => {\r\n    if (liteGraph) {\r\n      codec.compress(liteGraph.serialize()).then(data => {\r\n        setCompressed(data);\r\n      });\r\n    }\r\n\r\n    // console.log({\r\n    //   isLoggedIn: web3Connect.address\r\n    //     ? Box.isLoggedIn(web3Connect.address)\r\n    //     : \"n/a\"\r\n    // });\r\n\r\n    let space = getSpace();\r\n    let box = getBox();\r\n    let fetching = isFetching();\r\n\r\n    if (\r\n      web3Connect.address &&\r\n      Box.isLoggedIn(web3Connect.address) &&\r\n      !box &&\r\n      !space &&\r\n      !fetching\r\n    ) {\r\n      console.log(\"OPENING 3BOX from useEffect\");\r\n      open3Box(web3Connect.address, web3Connect.provider, console.log);\r\n    }\r\n  });\r\n\r\n  React.useEffect(() => {\r\n    let space = getSpace();\r\n    let box = getBox();\r\n    let fetching = isFetching();\r\n\r\n    if (\r\n      saveType === \"3BOX_SCREEN\" &&\r\n      box !== null &&\r\n      space !== null &&\r\n      !fetching\r\n    ) {\r\n      changeTo3BoxSavePage();\r\n    }\r\n  }, [saveType]);\r\n  let link =\r\n    window.location.protocol + \"//\" + window.location.host + \"/\" + compressed;\r\n\r\n  let qrcode = \"\";\r\n  if (link && link.length < 2580) {\r\n    qrcode = (\r\n      <div>\r\n        <QRCode\r\n          size={dynamicWidth}\r\n          value={link}\r\n          style={{ border: \"1px solid #dddddd\", padding: 5, margin: 5 }}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n  const changeTo3BoxSavePage = () => {\r\n    let savedTitle = localStorage.getItem(STORAGE_3BOX_DOCUMENT);\r\n    setDocumentTitle(savedTitle ? savedTitle : \"\");\r\n    if (savedTitle) {\r\n      updateDocumentInfo(savedTitle);\r\n    }\r\n    setSaveType(\"3BOX_SAVE\");\r\n  };\r\n  const download = async () => {\r\n    console.log(\"SAVING COMPRESSED\", compressed);\r\n\r\n    let webfile =\r\n      `<?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<!DOCTYPE plist PUBLIC \"-//Apple//DTD PLIST 1.0//EN\" \"http://www.apple.com/DTDs/PropertyList-1.0.dtd\">\r\n<plist version=\"1.0\">\r\n<dict>\r\n<key>URL</key>\r\n<string>https://eth.build/` +\r\n      compressed +\r\n      `</string>\r\n</dict>\r\n</plist>\r\n`;\r\n\r\n    var file = new Blob([webfile]);\r\n    var url = URL.createObjectURL(file);\r\n    var element = document.createElement(\"a\");\r\n    element.setAttribute(\"href\", url);\r\n    element.setAttribute(\r\n      \"download\",\r\n      (documentTitle ? documentTitle : \"eth.build\") + \".webloc\"\r\n    );\r\n    element.style.display = \"none\";\r\n    if (document.body) {\r\n      document.body.appendChild(element);\r\n      element.click();\r\n      document.body.removeChild(element);\r\n      setTimeout(function() {\r\n        URL.revokeObjectURL(url);\r\n      }, 1000 * 60);\r\n      handleClose();\r\n    }\r\n  };\r\n\r\n  const share = async () => {\r\n    console.log(\"share\", compressed);\r\n    setSaveType(\"SHARE\");\r\n    let result = await axios.post(\"https://network.eth.build:44386/build\", {\r\n      compressed\r\n    });\r\n\r\n    console.log(\"share result\", result);\r\n\r\n    if (result && result.data && result.data.key) {\r\n      console.log(\"SET SHARED:\", result.data.key);\r\n      setShared(result.data.key);\r\n      console.log(\"SHARED AS:\", shared);\r\n    }\r\n    //setTimeout(function() {\r\n    //  URL.revokeObjectURL(url);\r\n    //}, 1000 * 60);\r\n    //setOpenSaveDialog(false);\r\n  };\r\n\r\n  const connectTo3Box = async () => {\r\n    try {\r\n      let { space } = await open3Box(\r\n        web3Connect.address,\r\n        web3Connect.provider,\r\n        setThreeBoxStatus\r\n      );\r\n\r\n      let savedTitle = localStorage.getItem(STORAGE_3BOX_DOCUMENT);\r\n      setDocumentTitle(savedTitle ? savedTitle : \"\");\r\n\r\n      let documentInfo = await getDocumentInfo(space, savedTitle);\r\n      setCurrentDocumentInfo(documentInfo.metadata ? documentInfo : null);\r\n\r\n      setSaveType(\"3BOX_SAVE\");\r\n    } catch (error) {\r\n      setThreeBoxStatus(error);\r\n    }\r\n  };\r\n\r\n  const updateDocumentInfo = async fileName => {\r\n    let space = getSpace();\r\n    if (space) {\r\n      let documentInfo = await getDocumentInfo(space, fileName);\r\n      console.log(\"Updated DocumentInfo: \", documentInfo);\r\n      setCurrentDocumentInfo(documentInfo.metadata ? documentInfo : null);\r\n    } else {\r\n      console.log(\"NO 3BOX SPACE\");\r\n    }\r\n  };\r\n\r\n  const logout = async () => {\r\n    await logout3Box();\r\n    await web3Connect.resetApp();\r\n    setThreeBoxStatus(null);\r\n    setThreeBoxConnectionStep(0);\r\n    setSaveType(\"3BOX_SCREEN\");\r\n  };\r\n\r\n  const handleTitle = e => {\r\n    let title = e.target.value;\r\n    setDocumentTitle(title);\r\n    if (updateTimer) {\r\n      clearTimeout(updateTimer);\r\n    }\r\n    setUpdateTimer(\r\n      setTimeout(() => {\r\n        console.log(\"Running timer for \", title);\r\n        updateDocumentInfo(title);\r\n      }, 500)\r\n    );\r\n  };\r\n\r\n  return (\r\n    <Dialog\r\n      onClose={() => {\r\n        handleClose();\r\n      }}\r\n      open={openSaveDialog}\r\n      maxWidth=\"md\"\r\n    >\r\n      {/* <DialogTitle id=\"save-dialog\" style={{ textAlign: \"center\" }}>\r\n        <Icon style={{ verticalAlign: \"middle\" }}>save</Icon>\r\n        <span style={{ fontsize: 38, fontWeight: \"bold\" }}>Save</span>\r\n      </DialogTitle>\r\n      <Divider /> */}\r\n\r\n      {saveType === null && (\r\n        <>\r\n          <Grid\r\n            container\r\n            spacing={3}\r\n            justify=\"center\"\r\n            style={{ margin: 0, width: \"100%\", padding: \"32px 32px 0 32px\" }}\r\n          >\r\n            {/* <Grid item style={{ width: 220 }}>\r\n              <Tooltip title=\"QR code for this eth.build\">\r\n                <Button\r\n                  variant=\"contained\"\r\n                  className={classes.button}\r\n                  color=\"primary\"\r\n                  onClick={() => {\r\n                    setSaveType(\"QR_CODE\");\r\n                  }}\r\n                  startIcon={<CropFreeIcon />}\r\n                >\r\n                  QR Code\r\n                </Button>\r\n              </Tooltip>\r\n            </Grid> */}\r\n\r\n            <Grid item style={{ width: 220 }}>\r\n              <Tooltip title=\"Download a local file\">\r\n                <Button\r\n                  variant=\"contained\"\r\n                  className={classes.button}\r\n                  color=\"primary\"\r\n                  onClick={download}\r\n                  startIcon={<GetAppIcon />}\r\n                >\r\n                  Download\r\n                </Button>\r\n              </Tooltip>\r\n            </Grid>\r\n\r\n            <Grid item style={{ width: 220 }}>\r\n              <Tooltip title=\"Copy via a unique URL\">\r\n                <Button\r\n                  variant=\"contained\"\r\n                  className={classes.button}\r\n                  color=\"primary\"\r\n                  onClick={() => {\r\n                    setSaveType(\"COPY\");\r\n                  }}\r\n                  startIcon={<FileCopyIcon />}\r\n                >\r\n                  Copy\r\n                </Button>\r\n              </Tooltip>\r\n            </Grid>\r\n\r\n            <Grid item style={{ width: 220 }}>\r\n              <Tooltip title=\"Save to the network and share URL\">\r\n                <Button\r\n                  variant=\"contained\"\r\n                  className={classes.button}\r\n                  color=\"primary\"\r\n                  onClick={share}\r\n                  startIcon={<ShareIcon />}\r\n                >\r\n                  Share\r\n                </Button>\r\n              </Tooltip>\r\n            </Grid>\r\n\r\n            <Grid item style={{ width: 220 }}>\r\n              <Tooltip title=\"Save to your 3Box space\">\r\n                <Button\r\n                  variant=\"contained\"\r\n                  className={classes.button}\r\n                  color=\"primary\"\r\n                  onClick={() => {\r\n                    setSaveType(\"3BOX_SCREEN\");\r\n                    if (connected && threeBoxConnectionStep === 0) {\r\n                      setThreeBoxConnectionStep(1);\r\n                    }\r\n                    let fetching = isFetching();\r\n                    if (fetching) {\r\n                      setThreeBoxStatus(\r\n                        \"Connection to 3Box already in progress\"\r\n                      );\r\n                      let checkCompletion = () => {\r\n                        let fetching3Box = isFetching();\r\n                        if (!fetching3Box) {\r\n                          changeTo3BoxSavePage();\r\n                        } else {\r\n                          setTimeout(checkCompletion, 1000);\r\n                        }\r\n                      };\r\n                      setTimeout(checkCompletion, 1000);\r\n                    }\r\n                    let box = getBox();\r\n                    let space = getSpace();\r\n                    if (box && space) {\r\n                      console.log(\"3BOX is already open and available\");\r\n                      changeTo3BoxSavePage();\r\n                    }\r\n                  }}\r\n                  startIcon={<ThreeBoxIcon />}\r\n                >\r\n                  Save to 3Box\r\n                </Button>\r\n              </Tooltip>\r\n            </Grid>\r\n          </Grid>\r\n          <CardActions style={{ justifyContent: \"center\" }}>\r\n            {qrcode}\r\n          </CardActions>\r\n        </>\r\n      )}\r\n\r\n      {saveType === \"QR_CODE\" && (\r\n        <>\r\n          <CardActions style={{ justifyContent: \"center\" }}>\r\n            {qrcode}\r\n          </CardActions>\r\n        </>\r\n      )}\r\n\r\n      {saveType === \"SHARE\" && (\r\n        <>\r\n          <div style={{ padding: 32 }}>\r\n            {shared ? (\r\n              <div\r\n                style={{\r\n                  margin: \"0 auto\",\r\n                  width: \"100%\",\r\n                  textAlign: \"center\",\r\n                  fontSize: 12,\r\n                  color: \"#000000\"\r\n                }}\r\n              >\r\n                <a href={\"https://eth.build/build#\" + shared}>\r\n                  {\"https://eth.build/build#\" + shared}\r\n                </a>\r\n\r\n                <div>\r\n                  <QRCode\r\n                    size={dynamicWidth}\r\n                    value={\"https://eth.build/build#\" + shared}\r\n                    style={{\r\n                      border: \"1px solid #dddddd\",\r\n                      padding: 20,\r\n                      margin: 5\r\n                    }}\r\n                  />\r\n                </div>\r\n              </div>\r\n            ) : (\r\n              <div style={{ padding: 32 }}>\r\n                <CircularProgress\r\n                  style={{\r\n                    width: 40,\r\n                    height: 40,\r\n                    display: \"block\",\r\n                    textAlign: \"center\",\r\n                    margin: \"auto\",\r\n                    marginBottom: 16\r\n                  }}\r\n                />\r\n                <Typography variant=\"overline\" display=\"block\" gutterBottom>\r\n                  saving to network\r\n                </Typography>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </>\r\n      )}\r\n\r\n      {saveType === \"COPY\" && (\r\n        <>\r\n          <CardActions style={{ justifyContent: \"center\", padding: 32 }}>\r\n            <input\r\n              id=\"savelink\"\r\n              style={{\r\n                border: \"1px solid #dddddd\",\r\n                padding: 5,\r\n                margin: 5,\r\n                width: dynamicWidth\r\n              }}\r\n              value={link}\r\n            ></input>\r\n\r\n            <Button\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              onClick={() => {\r\n                var copyText = document.getElementById(\"savelink\");\r\n                copyText.select();\r\n                copyText.setSelectionRange(0, 99999);\r\n                document.execCommand(\"copy\");\r\n                handleClose();\r\n              }}\r\n            >\r\n              Copy\r\n            </Button>\r\n          </CardActions>\r\n        </>\r\n      )}\r\n\r\n      {saveType === \"3BOX_SCREEN\" && (\r\n        <>\r\n          <div\r\n            style={{\r\n              justifyContent: \"center\",\r\n              padding: 32,\r\n              textAlign: \"center\"\r\n            }}\r\n          >\r\n            <Stepper alternativeLabel activeStep={threeBoxConnectionStep}>\r\n              <Step>\r\n                <StepLabel>Sign in with your wallet</StepLabel>\r\n              </Step>\r\n              <Step>\r\n                <StepLabel>Connect to 3Box</StepLabel>\r\n              </Step>\r\n            </Stepper>\r\n\r\n            {threeBoxConnectionStep === 0 && (\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n                onClick={async () => {\r\n                  setOpenSaveDialog(false);\r\n                  await web3Connect.triggerConnect();\r\n                  setOpenSaveDialog(true);\r\n                  setThreeBoxConnectionStep(1);\r\n                }}\r\n                style={{ margin: 16 }}\r\n              >\r\n                Choose Wallet\r\n              </Button>\r\n            )}\r\n            {threeBoxConnectionStep === 1 && (\r\n              <div>\r\n                {web3Connect.address !== null && (\r\n                  <ProfileHover\r\n                    address={web3Connect.address}\r\n                    showName={true}\r\n                    orientation=\"bottom\"\r\n                    displayFull={true}\r\n                  />\r\n                )}\r\n                <div>\r\n                  <Button\r\n                    variant=\"contained\"\r\n                    color=\"primary\"\r\n                    onClick={connectTo3Box}\r\n                    style={{ margin: 8 }}\r\n                    disabled={isFetching()}\r\n                  >\r\n                    Connect\r\n                  </Button>\r\n                  <Typography\r\n                    style={{ marginTop: 8, height: 24 }}\r\n                    display=\"block\"\r\n                    variant=\"caption\"\r\n                  >\r\n                    {threeBoxStatus ? threeBoxStatus : \"\"}\r\n                  </Typography>\r\n                </div>\r\n              </div>\r\n            )}\r\n            <Link\r\n              component=\"button\"\r\n              variant=\"body2\"\r\n              onClick={logout}\r\n              style={{\r\n                display: \"block\",\r\n                margin: \"auto\"\r\n              }}\r\n            >\r\n              Logout\r\n            </Link>\r\n          </div>\r\n        </>\r\n      )}\r\n      {saveType === \"3BOX_SAVE\" && (\r\n        <>\r\n          <div style={{ padding: 32, textAlign: \"center\" }}>\r\n            <Typography variant=\"button\">Save to 3Box</Typography>\r\n            <Typography\r\n              variant=\"caption\"\r\n              style={{\r\n                marginTop: 16,\r\n                marginBottom: 16,\r\n                maxWidth: 300,\r\n                textAlign: \"justify\"\r\n              }}\r\n              display=\"block\"\r\n            >\r\n              You can save your eth.build file directly to your 3Box private\r\n              space. This means that it is saved encrypted on IPFS and only you\r\n              can access to it.\r\n            </Typography>\r\n            <TextField\r\n              fullWidth\r\n              name=\"title\"\r\n              label=\"File Name\"\r\n              variant=\"outlined\"\r\n              value={documentTitle}\r\n              onChange={handleTitle}\r\n              required\r\n              style={{ marginTop: 16 }}\r\n            />\r\n\r\n            {/* <FormControlLabel\r\n              control={\r\n                <Switch\r\n                  checked={publicDocument}\r\n                  onChange={event => setPublicDocument(event.target.checked)}\r\n                  value=\"publicDocument\"\r\n                  color=\"primary\"\r\n                />\r\n              }\r\n              label=\"Public\"\r\n            /> */}\r\n\r\n            <Typography variant=\"caption\" display=\"block\">\r\n              {currentDocumentInfo !== null\r\n                ? `Last saved ${moment\r\n                    .unix(currentDocumentInfo.metadata.timestamp)\r\n                    .fromNow()}`\r\n                : \"\"}\r\n            </Typography>\r\n\r\n            <Button\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              onClick={async () => {\r\n                setSaving(true);\r\n                let space = getSpace();\r\n                await saveDocument(\r\n                  space,\r\n                  documentTitle,\r\n                  compressed,\r\n                  screenshot\r\n                );\r\n                updateDocumentInfo(documentTitle);\r\n                localStorage.setItem(STORAGE_3BOX_DOCUMENT, documentTitle);\r\n                setSaving(false);\r\n              }}\r\n              style={{ margin: 16 }}\r\n              disabled={\r\n                (currentDocumentInfo &&\r\n                  currentDocumentInfo.document.data === compressed) ||\r\n                saving\r\n              }\r\n            >\r\n              Save\r\n            </Button>\r\n            <Link\r\n              component=\"button\"\r\n              variant=\"body2\"\r\n              onClick={logout}\r\n              style={{\r\n                display: \"block\",\r\n                margin: \"auto\"\r\n              }}\r\n            >\r\n              Logout\r\n            </Link>\r\n          </div>\r\n        </>\r\n      )}\r\n    </Dialog>\r\n  );\r\n}\r\n\r\nexport default SaveDialog;\r\n","import Dialog from '@material-ui/core/Dialog';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport React from 'react';\r\nimport { Icon, CardActions, Divider } from '@material-ui/core';\r\n\r\nfunction AboutDialog(props) {\r\n  const { setOpenAboutDialog, openAboutDialog } = props;\r\n\r\n  return (\r\n    <Dialog onClose={()=>{setOpenAboutDialog(false)}} open={openAboutDialog} maxWidth=\"md\" fullWidth={true}>\r\n      <DialogTitle id=\"save-dialog\" style={{textAlign:\"center\"}}>\r\n        <Icon style={{verticalAlign:'middle'}}>\r\n          info\r\n        </Icon>\r\n        <span style={{fontsize:38,fontWeight:\"bold\"}}>\r\n          About\r\n        </span>\r\n      </DialogTitle>\r\n      <Divider/>\r\n      <CardActions style={{justifyContent: 'center'}}>\r\n        <div style={{padding:\"2%\"}}>\r\n          <a target=\"_blank\" href=\"https://eth.build\">Eth.Build</a> (<a target=\"_blank\" href=\"https://github.com/austintgriffith/eth.build\">source</a>) created by <a target=\"_blank\" href=\"https://twitter.com/austingriffith\">Austin Griffith</a>\r\n        </div>\r\n      </CardActions>\r\n      <CardActions style={{justifyContent: 'center'}}>\r\n        <div style={{padding:\"2%\"}}>\r\n          With support from <a target=\"_blank\" href=\"https://ethereum.org\">the Ethereum Foundation</a>, <a target=\"_blank\" href=\"https://consensys.net/\">Consensys</a>, and <a target=\"_blank\" href=\"https://gitcoin.co/grants/122/austin-griffith-ethereum-rampd\">Gitcoin Grants</a>\r\n      </div>\r\n    </CardActions>\r\n    <CardActions style={{justifyContent: 'center'}}>\r\n      <div style={{padding:\"2%\"}}>\r\n        Special thanks to <a target=\"_blank\" href=\"https://github.com/jagenjo\">Javi Agenjo</a> for <a target=\"_blank\" href=\"https://github.com/jagenjo/litegraph.js\">litegraph</a>\r\n    </div>\r\n  </CardActions>\r\n</Dialog>\r\n)\r\n}\r\n\r\nexport default AboutDialog;\r\n","import Dialog from '@material-ui/core/Dialog';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport React from 'react';\r\nimport { Icon, CardActions, Divider } from '@material-ui/core';\r\n\r\nfunction SettingsDialog(props) {\r\n  const { setOpenSettingsDialog, openSettingsDialog } = props;\r\n\r\n  return (\r\n    <Dialog onClose={()=>{setOpenSettingsDialog(false)}} open={openSettingsDialog} maxWidth=\"md\" fullWidth={true}>\r\n      <DialogTitle id=\"save-dialog\" style={{textAlign:\"center\"}}>\r\n        <Icon style={{verticalAlign:'middle'}}>\r\n          build\r\n        </Icon>\r\n        <span style={{fontsize:38,fontWeight:\"bold\"}}>\r\n          Settings\r\n        </span>\r\n      </DialogTitle>\r\n      <Divider/>\r\n      <CardActions style={{justifyContent: 'center'}}>\r\n        <div style={{padding:\"2%\"}}>\r\n          <a target=\"_blank\" href=\"https://eth.build\">Eth.Build</a> (<a target=\"_blank\" href=\"https://github.com/austintgriffith/eth.build\">source</a>) created by <a target=\"_blank\" href=\"https://twitter.com/austingriffith\">Austin Griffith</a>\r\n        </div>\r\n      </CardActions>\r\n      <CardActions style={{justifyContent: 'center'}}>\r\n        <div style={{padding:\"2%\"}}>\r\n          With support from <a target=\"_blank\" href=\"https://ethereum.org\">the Ethereum Foundation</a>, <a target=\"_blank\" href=\"https://consensys.net/\">Consensys</a>, and <a target=\"_blank\" href=\"https://gitcoin.co/grants/122/austin-griffith-ethereum-rampd\">Gitcoin Grants</a>\r\n      </div>\r\n    </CardActions>\r\n    <CardActions style={{justifyContent: 'center'}}>\r\n      <div style={{padding:\"2%\"}}>\r\n        Special thanks to <a target=\"_blank\" href=\"https://github.com/jagenjo\">Javi Agenjo</a> for <a target=\"_blank\" href=\"https://github.com/jagenjo/litegraph.js\">litegraph</a>\r\n    </div>\r\n  </CardActions>\r\n</Dialog>\r\n)\r\n}\r\n\r\nexport default SettingsDialog;\r\n","import React from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport GridList from \"@material-ui/core/GridList\";\r\nimport GridListTile from \"@material-ui/core/GridListTile\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport GridListTileBar from \"@material-ui/core/GridListTileBar\";\r\n// import ListSubheader from \"@material-ui/core/ListSubheader\";\r\n// import IconButton from \"@material-ui/core/IconButton\";\r\n// import InfoIcon from \"@material-ui/icons/Info\";\r\n// import tileData from './tileData';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  root: {\r\n    display: \"flex\",\r\n    flexWrap: \"wrap\",\r\n    justifyContent: \"space-around\",\r\n    overflow: \"hidden\",\r\n    backgroundColor: theme.palette.background.paper\r\n  },\r\n  gridList: {\r\n    width: 500,\r\n    height: 450\r\n  },\r\n  icon: {\r\n    color: \"rgba(85, 85, 85, 0.8)\"\r\n  }\r\n}));\r\n\r\nexport default function FilesList({ files, onClick }) {\r\n  const classes = useStyles();\r\n  console.log(files);\r\n  return (\r\n    <div className={classes.root}>\r\n      <GridList cellHeight={180} className={classes.gridList}>\r\n        {/* <GridListTile key=\"Subheader\" cols={2} style={{ height: \"auto\" }}>\r\n          <ListSubheader component=\"div\">My eth.build files</ListSubheader>\r\n        </GridListTile> */}\r\n        {files.map(file => (\r\n          <GridListTile\r\n            key={file.fileName}\r\n            style={{ cursor: \"pointer\" }}\r\n            onClick={() => (onClick ? onClick(file) : null)}\r\n          >\r\n            <img src={file.screenshot} alt={file.fileName} />\r\n            <GridListTileBar\r\n              title={file.fileName}\r\n              subtitle={<span>modified {file.timestampStr}</span>}\r\n              // actionIcon={\r\n              //   <IconButton\r\n              //     aria-label={`info about ${file.fileName}`}\r\n              //     className={classes.icon}\r\n              //   >\r\n              //     <InfoIcon />\r\n              //   </IconButton>\r\n              // }\r\n              style={{ background: \"rgba(255, 255, 255, 0.2)\" }}\r\n            />\r\n          </GridListTile>\r\n        ))}\r\n        {files.length === 0 && (\r\n          <Typography\r\n            variant=\"caption\"\r\n            align=\"center\"\r\n            style={{ margin: \"auto\", marginTop: 32 }}\r\n          >\r\n            No files available\r\n          </Typography>\r\n        )}\r\n      </GridList>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\n// import DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport \"litegraph.js/css/litegraph.css\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport Stepper from \"@material-ui/core/Stepper\";\r\nimport Step from \"@material-ui/core/Step\";\r\nimport StepLabel from \"@material-ui/core/StepLabel\";\r\nimport { Button, SvgIcon, Typography, Tooltip, Link } from \"@material-ui/core\";\r\nimport FileCopyIcon from \"@material-ui/icons/FileCopy\";\r\nimport useWeb3Connect from \"../utils/useWeb3Connect\";\r\nimport {\r\n  open3Box,\r\n  logout3Box,\r\n  getSpace,\r\n  getBox,\r\n  isFetching\r\n} from \"../utils/3BoxManager\";\r\n\r\nimport Box from \"3box\";\r\nimport ProfileHover from \"profile-hover\";\r\nimport { loadDocuments } from \"../utils/Documents3BoxSpace\";\r\nimport FilesList from \"./FilesList\";\r\n\r\nconst STORAGE_3BOX_DOCUMENT = \"eth.build.documentTitle3Box\";\r\n\r\nvar codec = require(\"json-url\")(\"lzw\");\r\n\r\nconst useStyles = makeStyles({\r\n  button: {\r\n    width: 200\r\n  }\r\n});\r\n\r\nconst ThreeBoxIcon = props => {\r\n  return (\r\n    <SvgIcon {...props} viewBox=\"0 0 290 289\">\r\n      <path\r\n        d=\"M42 0H248C271.196 0 290 18.804 290 42V247C290 270.196 271.196 289 248 289H42C18.804 289 0 270.196 0 247V42C0 18.804 18.804 0 42 0ZM146.438 47.823C137.893 47.823 129.906 49.0022 122.474 51.3607C115.043 53.7193 108.457 57.2347 102.716 61.9072C96.9757 66.5798 92.192 72.4092 88.365 79.3958C84.538 86.3823 81.957 94.5035 80.622 103.759L97.977 106.83C99.579 107.097 101.092 107.23 102.516 107.23C105.542 107.23 107.989 106.496 109.858 105.028C111.728 103.559 113.196 101.134 114.264 97.752C116.311 91.255 119.915 85.9373 125.077 81.7988C130.24 77.6602 136.736 75.591 144.568 75.591C153.202 75.591 160.01 77.9272 164.994 82.5997C169.978 87.2723 172.47 94.192 172.47 103.359C172.47 107.631 171.847 111.547 170.601 115.107C169.355 118.667 167.152 121.715 163.993 124.252C160.833 126.788 156.584 128.768 151.243 130.193C145.903 131.617 139.184 132.373 131.085 132.462V155.958C140.875 155.958 148.685 156.714 154.514 158.227C160.344 159.741 164.816 161.832 167.931 164.502C171.046 167.172 173.093 170.398 174.072 174.181C175.051 177.963 175.54 182.168 175.54 186.796C175.54 190.446 174.851 194.072 173.471 197.677C172.092 201.281 170 204.552 167.197 207.489C164.393 210.426 160.9 212.807 156.717 214.631C152.534 216.456 147.639 217.368 142.032 217.368C137.048 217.368 132.754 216.634 129.149 215.165C125.545 213.697 122.408 211.783 119.738 209.425C117.067 207.066 114.776 204.374 112.862 201.348C110.949 198.322 109.191 195.252 107.589 192.137C106.61 190.267 105.208 188.844 103.384 187.865C101.559 186.885 99.49 186.396 97.176 186.396C94.595 186.396 92.0585 186.93 89.5665 187.998L75.015 194.005C77.685 202.283 80.889 209.58 84.627 215.9C88.365 222.219 92.904 227.558 98.244 231.919C103.584 236.281 109.858 239.573 117.067 241.798C124.277 244.024 132.731 245.136 142.432 245.136C151.333 245.136 159.765 243.846 167.731 241.264C175.696 238.683 182.705 234.879 188.757 229.85C194.809 224.822 199.615 218.614 203.175 211.227C206.735 203.84 208.515 195.341 208.515 185.729C208.515 174.425 205.667 165.036 199.971 157.56C194.275 150.084 185.642 144.522 174.072 140.872C178.878 139.27 183.172 137.268 186.955 134.865C190.737 132.462 193.941 129.525 196.567 126.054C199.192 122.583 201.195 118.511 202.574 113.839C203.954 109.166 204.643 103.76 204.643 97.6185C204.643 90.5875 203.286 84.046 200.572 77.994C197.857 71.942 193.964 66.6688 188.891 62.1743C183.817 57.6797 177.699 54.1643 170.534 51.6278C163.37 49.0912 155.338 47.823 146.438 47.823Z\"\r\n        fill=\"white\"\r\n      />\r\n    </SvgIcon>\r\n  );\r\n};\r\n\r\nfunction LoadDialog(props) {\r\n  const { liteGraph, setOpenLoadDialog, openLoadDialog, live } = props;\r\n\r\n  const classes = useStyles();\r\n\r\n  const [loadType, setLoadType] = React.useState(null);\r\n\r\n  const web3Connect = useWeb3Connect();\r\n\r\n  const connected = web3Connect.connected;\r\n\r\n  const [threeBoxStatus, setThreeBoxStatus] = React.useState(null);\r\n  const [threeBoxConnectionStep, setThreeBoxConnectionStep] = React.useState(0);\r\n  const [documents, setDocuments] = React.useState([]);\r\n\r\n  const handleClose = () => {\r\n    setOpenLoadDialog(false);\r\n    setLoadType(null);\r\n    setThreeBoxStatus(null);\r\n    setThreeBoxConnectionStep(0);\r\n    // clearTimeout(updateTimer);\r\n    // setUpdateTimer(null);\r\n    // setSaving(false);\r\n  };\r\n\r\n  React.useEffect(() => {\r\n    console.log({\r\n      isLoggedIn: web3Connect.address\r\n        ? Box.isLoggedIn(web3Connect.address)\r\n        : \"n/a\"\r\n    });\r\n\r\n    let space = getSpace();\r\n    let box = getBox();\r\n    let fetching = isFetching();\r\n\r\n    if (\r\n      web3Connect.address &&\r\n      Box.isLoggedIn(web3Connect.address) &&\r\n      !box &&\r\n      !space &&\r\n      !fetching\r\n    ) {\r\n      console.log(\"OPENING 3BOX from useEffect\");\r\n      open3Box(web3Connect.address, web3Connect.provider, console.log);\r\n    }\r\n  });\r\n\r\n  React.useEffect(() => {\r\n    let space = getSpace();\r\n    let box = getBox();\r\n    let fetching = isFetching();\r\n\r\n    if (\r\n      loadType === \"3BOX_SCREEN\" &&\r\n      box !== null &&\r\n      space !== null &&\r\n      !fetching\r\n    ) {\r\n      changeTo3BoxLoadPage();\r\n    }\r\n  }, [loadType]);\r\n\r\n  const changeTo3BoxLoadPage = async () => {\r\n    let space = getSpace();\r\n\r\n    setDocuments(await loadDocuments(space));\r\n    setLoadType(\"3BOX_LOAD\");\r\n  };\r\n\r\n  const connectTo3Box = async () => {\r\n    try {\r\n      let { space } = await open3Box(\r\n        web3Connect.address,\r\n        web3Connect.provider,\r\n        setThreeBoxStatus\r\n      );\r\n      setDocuments(await loadDocuments(space));\r\n      setLoadType(\"3BOX_LOAD\");\r\n    } catch (error) {\r\n      setThreeBoxStatus(error);\r\n    }\r\n  };\r\n\r\n  const logout = async () => {\r\n    await logout3Box();\r\n    await web3Connect.resetApp();\r\n    setThreeBoxStatus(null);\r\n    setThreeBoxConnectionStep(0);\r\n    setLoadType(\"3BOX_SCREEN\");\r\n  };\r\n\r\n  const loadFromFile = async () => {\r\n    document.getElementById(\"loadjsonfile\").click();\r\n    handleClose();\r\n  };\r\n\r\n  const getJsonFromCompressed = compressedString =>\r\n    new Promise((resolve, reject) => {\r\n      let loc = compressedString.indexOf(\"<string>\");\r\n      if (loc > 0) {\r\n        loc += 8;\r\n        let endloc = compressedString.indexOf(\"</string>\", loc);\r\n        //console.log(\"loc\",loc,\"endloc\",endloc)\r\n        compressedString = compressedString.substr(loc, endloc - loc);\r\n        compressedString = compressedString.substr(\r\n          compressedString.lastIndexOf(\"/\") + 1\r\n        );\r\n      }\r\n      console.log(\"decompress:\", compressedString);\r\n      codec.decompress(compressedString).then(json => {\r\n        console.log(\"configure graph with:\", json);\r\n        if (json) {\r\n          resolve(json);\r\n        }\r\n      });\r\n    });\r\n\r\n  const openFile = async file => {\r\n    console.log(\"Opening FILE: \", file);\r\n    let compressedString = file.data;\r\n    let json = await getJsonFromCompressed(compressedString);\r\n\r\n    localStorage.setItem(\"litegraph\", JSON.stringify(json));\r\n    liteGraph.configure(json);\r\n\r\n    localStorage.setItem(STORAGE_3BOX_DOCUMENT, file.fileName);\r\n    handleClose();\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div style={{ position: \"absolute\", bottom: -100000, left: -100000 }}>\r\n        <span\r\n          style={{\r\n            border: \"1px solid #777777\",\r\n            color: live ? \"#00ff00\" : \"#0000ff\",\r\n            padding: 5,\r\n            cursor: \"pointer\"\r\n          }}\r\n        >\r\n          <input\r\n            id=\"loadjsonfile\"\r\n            type=\"file\"\r\n            name=\"file\"\r\n            onChange={e => {\r\n              console.log(\"FILE\", e.target.files[0]);\r\n              var reader = new FileReader();\r\n              reader.onload = event => {\r\n                let compressedString = event.target.result;\r\n                //console.log(\"compressedString\",compressedString)\r\n                let loc = compressedString.indexOf(\"<string>\");\r\n                if (loc > 0) {\r\n                  loc += 8;\r\n                  let endloc = compressedString.indexOf(\"</string>\", loc);\r\n                  //console.log(\"loc\",loc,\"endloc\",endloc)\r\n                  compressedString = compressedString.substr(loc, endloc - loc);\r\n                  compressedString = compressedString.substr(\r\n                    compressedString.lastIndexOf(\"/\") + 1\r\n                  );\r\n                }\r\n                console.log(\"decompress:\", compressedString);\r\n                codec.decompress(compressedString).then(json => {\r\n                  console.log(\"configure graph with:\", json);\r\n                  if (json) {\r\n                    localStorage.setItem(\"litegraph\", JSON.stringify(json));\r\n                    liteGraph.configure(json);\r\n                  }\r\n                });\r\n              };\r\n              try {\r\n                reader.readAsText(e.target.files[0]);\r\n              } catch (e) {\r\n                console.log(e);\r\n              }\r\n            }}\r\n          ></input>\r\n        </span>\r\n      </div>\r\n      <Dialog\r\n        onClose={() => {\r\n          handleClose();\r\n        }}\r\n        open={openLoadDialog}\r\n        maxWidth=\"md\"\r\n      >\r\n        {/* <DialogTitle id=\"save-dialog\" style={{ textAlign: \"center\" }}>\r\n        <Icon style={{ verticalAlign: \"middle\" }}>save</Icon>\r\n        <span style={{ fontsize: 38, fontWeight: \"bold\" }}>Save</span>\r\n      </DialogTitle>\r\n      <Divider /> */}\r\n\r\n        {loadType === null && (\r\n          <>\r\n            <Grid\r\n              container\r\n              spacing={3}\r\n              justify=\"center\"\r\n              style={{ margin: 0, width: \"100%\", padding: 32 }}\r\n            >\r\n              <Grid item style={{ width: 220 }}>\r\n                <Tooltip title=\"Load from file\">\r\n                  <Button\r\n                    variant=\"contained\"\r\n                    className={classes.button}\r\n                    color=\"primary\"\r\n                    onClick={loadFromFile}\r\n                    startIcon={<FileCopyIcon />}\r\n                  >\r\n                    Load from file\r\n                  </Button>\r\n                </Tooltip>\r\n              </Grid>\r\n\r\n              <Grid item style={{ width: 220 }}>\r\n                <Tooltip title=\"Load from your 3Box space\">\r\n                  <Button\r\n                    variant=\"contained\"\r\n                    className={classes.button}\r\n                    color=\"primary\"\r\n                    onClick={() => {\r\n                      setLoadType(\"3BOX_SCREEN\");\r\n                      if (connected && threeBoxConnectionStep === 0) {\r\n                        setThreeBoxConnectionStep(1);\r\n                      }\r\n                      let fetching = isFetching();\r\n                      if (fetching) {\r\n                        setThreeBoxStatus(\r\n                          \"Connection to 3Box already in progress\"\r\n                        );\r\n                        let checkCompletion = () => {\r\n                          let fetching3Box = isFetching();\r\n                          if (!fetching3Box) {\r\n                            changeTo3BoxLoadPage();\r\n                          } else {\r\n                            setTimeout(checkCompletion, 1000);\r\n                          }\r\n                        };\r\n                        setTimeout(checkCompletion, 1000);\r\n                      }\r\n                      let box = getBox();\r\n                      let space = getSpace();\r\n\r\n                      if (box && space) {\r\n                        console.log(\"3BOX is already open and available\");\r\n                        changeTo3BoxLoadPage();\r\n                      }\r\n                    }}\r\n                    startIcon={<ThreeBoxIcon />}\r\n                  >\r\n                    Load from 3Box\r\n                  </Button>\r\n                </Tooltip>\r\n              </Grid>\r\n            </Grid>\r\n          </>\r\n        )}\r\n\r\n        {loadType === \"3BOX_SCREEN\" && (\r\n          <>\r\n            <div\r\n              style={{\r\n                justifyContent: \"center\",\r\n                padding: 32,\r\n                textAlign: \"center\"\r\n              }}\r\n            >\r\n              <Stepper alternativeLabel activeStep={threeBoxConnectionStep}>\r\n                <Step>\r\n                  <StepLabel>Sign in with your wallet</StepLabel>\r\n                </Step>\r\n                <Step>\r\n                  <StepLabel>Connect to 3Box</StepLabel>\r\n                </Step>\r\n              </Stepper>\r\n\r\n              {threeBoxConnectionStep === 0 && (\r\n                <Button\r\n                  variant=\"contained\"\r\n                  color=\"primary\"\r\n                  onClick={async () => {\r\n                    setOpenLoadDialog(false);\r\n                    await web3Connect.triggerConnect();\r\n                    setOpenLoadDialog(true);\r\n                    setThreeBoxConnectionStep(1);\r\n                  }}\r\n                  style={{ margin: 16 }}\r\n                >\r\n                  Choose Wallet\r\n                </Button>\r\n              )}\r\n              {threeBoxConnectionStep === 1 && (\r\n                <div>\r\n                  {web3Connect.address !== null && (\r\n                    <ProfileHover\r\n                      address={web3Connect.address}\r\n                      showName={true}\r\n                      orientation=\"bottom\"\r\n                      displayFull={true}\r\n                    />\r\n                  )}\r\n                  <div>\r\n                    <Button\r\n                      variant=\"contained\"\r\n                      color=\"primary\"\r\n                      onClick={connectTo3Box}\r\n                      style={{ margin: 8 }}\r\n                      disabled={isFetching()}\r\n                    >\r\n                      Connect\r\n                    </Button>\r\n                    <Typography\r\n                      style={{ marginTop: 8, height: 24 }}\r\n                      display=\"block\"\r\n                      variant=\"caption\"\r\n                    >\r\n                      {threeBoxStatus ? threeBoxStatus : \"\"}\r\n                    </Typography>\r\n                  </div>\r\n                </div>\r\n              )}\r\n              <Link\r\n                component=\"button\"\r\n                variant=\"body2\"\r\n                onClick={logout}\r\n                style={{\r\n                  display: \"block\",\r\n                  margin: \"auto\"\r\n                }}\r\n              >\r\n                Logout\r\n              </Link>\r\n            </div>\r\n          </>\r\n        )}\r\n        {loadType === \"3BOX_LOAD\" && (\r\n          <>\r\n            <div style={{ padding: 32, textAlign: \"center\" }}>\r\n              <Typography variant=\"button\">Load from 3Box</Typography>\r\n              <div style={{ marginTop: 16, marginBottom: 16 }}>\r\n                <FilesList files={documents} onClick={openFile} />\r\n              </div>\r\n              {/* <TextField\r\n              fullWidth\r\n              name=\"title\"\r\n              label=\"File Name\"\r\n              variant=\"outlined\"\r\n              value={documentTitle}\r\n              onChange={handleTitle}\r\n              required\r\n              style={{ marginTop: 16 }}\r\n            /> */}\r\n\r\n              {/* <FormControlLabel\r\n              control={\r\n                <Switch\r\n                  checked={publicDocument}\r\n                  onChange={event => setPublicDocument(event.target.checked)}\r\n                  value=\"publicDocument\"\r\n                  color=\"primary\"\r\n                />\r\n              }\r\n              label=\"Public\"\r\n            /> */}\r\n\r\n              {/* <Typography variant=\"caption\" display=\"block\">\r\n              {currentDocumentInfo !== null\r\n                ? `Last saved ${moment\r\n                    .unix(currentDocumentInfo.metadata.timestamp)\r\n                    .fromNow()}`\r\n                : \"\"}\r\n            </Typography>\r\n\r\n            <Button\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              onClick={async () => {\r\n                setSaving(true);\r\n                await saveDocument(\r\n                  threeBoxSpace,\r\n                  documentTitle,\r\n                  compressed,\r\n                  screenshot\r\n                );\r\n                updateDocumentInfo(documentTitle);\r\n                localStorage.setItem(STORAGE_3BOX_DOCUMENT, documentTitle);\r\n                setSaving(false);\r\n              }}\r\n              style={{ margin: 16 }}\r\n              disabled={\r\n                (currentDocumentInfo &&\r\n                  currentDocumentInfo.document.data === compressed) ||\r\n                saving\r\n              }\r\n            >\r\n              Save\r\n            </Button> */}\r\n              <Link\r\n                component=\"button\"\r\n                variant=\"body2\"\r\n                onClick={logout}\r\n                style={{\r\n                  display: \"block\",\r\n                  margin: \"auto\"\r\n                }}\r\n              >\r\n                Logout\r\n              </Link>\r\n            </div>\r\n          </>\r\n        )}\r\n      </Dialog>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default LoadDialog;\r\n","var map = {\n\t\"./\": 294,\n\t\"./Game3\": 188,\n\t\"./Game3/\": 188,\n\t\"./Game3/Button\": 295,\n\t\"./Game3/Button.js\": 295,\n\t\"./Game3/index\": 188,\n\t\"./Game3/index.js\": 188,\n\t\"./index\": 294,\n\t\"./index.js\": 294\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 981;","var map = {\n\t\"./Game3/Button.js\": 295,\n\t\"./Game3/index.js\": 188,\n\t\"./index.js\": 294\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 982;","var map = {\n\t\"./Button.js\": 295,\n\t\"./index.js\": 188\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 987;"],"sourceRoot":""}